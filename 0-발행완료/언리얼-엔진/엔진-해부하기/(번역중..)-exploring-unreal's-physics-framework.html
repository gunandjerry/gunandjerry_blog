<!DOCTYPE html> <html lang="ko"><head>
<title>(번역중..) Exploring Unreal's Physics Framework</title>
<base href="../../..">
<meta name="pathname" content="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html">
<meta name="description" content="건제리의 블로그 - (번역중..) Exploring Unreal's Physics Framework">
<meta property="og:title" content="(번역중..) Exploring Unreal's Physics Framework">
<meta property="og:description" content="건제리의 블로그 - (번역중..) Exploring Unreal's Physics Framework">
<meta property="og:type" content="website">
<meta property="og:url" content="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html">
<meta property="og:image" content="♣vaultstorage/attachment/pasted-image-20251118155651.png">
<meta charset="UTF-8"><meta property="og:site_name" content="건제리의 블로그"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager is-frameless is-hidden-frameless styled-scrollbars show-inline-title show-ribbon ctp-latte ctp-mocha ctp-accent-sapphire anuppuccin-accent-toggle anp-callout-sleek anp-codeblock-numbers anp-list-toggle anp-table-toggle anp-table-th-highlight anp-h1-red anp-h2-peach anp-h3-green anp-h4-teal anp-h5-lavender anp-h6-mauve anp-decoration-toggle anp-bold-red anp-italic-maroon anp-highlight-yellow anp-file-icons anp-collapse-folders anp-simple-rainbow-color-toggle anp-rainbow-file-toggle anp-simple-rainbow-title-toggle anp-simple-rainbow-collapse-icon-toggle anp-simple-rainbow-indentation-toggle anp-default-tab anp-card-layout is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event allow-fold-headings allow-fold-lists show-indentation-guide show-properties is-readable-line-width" data-type="markdown"><style id="MJX-CHTML-styles">mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D43F.TEX-I::before{padding:.683em .681em 0 0;content:"L"}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D44A.TEX-I::before{padding:.683em 1.048em .022em 0;content:"W"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="(번역중..)_Exploring_Unreal's_Physics_Framework_0">(번역중..) Exploring Unreal's Physics Framework</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">이 글은 2022. 12. 02. Caius님에 의해 작성된 블로그 'Exploring Unreal's physics framework'를 번역한 것임을 알린다.<br>
<a rel="noopener nofollow" class="external-link is-unresolved" href="https://itscai.us/blog/post/ue-physics-framework/" target="_self">https://itscai.us/blog/post/ue-physics-framework/</a></p>
</div></div></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251118155651.png" src="♣vaultstorage/attachment/pasted-image-20251118155651.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251118155651.png" src="♣vaultstorage/attachment/pasted-image-20251118155651.png" target="_self"></span></p></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="머리말" dir="auto" class="heading" id="머리말_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>머리말</h1></div><div class="el-p"><p dir="auto">Unreal’s physics framework and its new(ish) physics engine Chaos are some pretty sophisticated software. Certainly there are things to complain about and improve on, but it’s easy to take for granted having such a robust and performant 3D physics/collision system Just Work by choosing a component in a dropdown, without having to read and reproduce a computer science PhD thesis.</p></div><div class="el-p"><p dir="auto">Of course, when working on a project with a non-trivial use case for the physics engine, there are times when it doesn’t Just Work, and things become a familiar game of helplessly searching for the magic checkbox or contriving a nasty workaround, and if worse comes to worst it’s entirely possible that the situation might call for engine modification. In these cases it becomes necessary to pop the hood and at least read some engine code - a daunting task in most cases, but particularly so for such a technical and pervasive aspect of the game engine.</p></div><div class="el-p"><p dir="auto">This blog post aims to provide a basic overview of the internal C++ engine classes associated with Unreal’s physics framework, and outline the major code paths between the API and these classes. It does not explore advanced physics features, and it doesn’t cover the implementation of the physics simulation itself. Rather, it connects the dots between the familiar Unreal API classes and the “black box” that updates the positions of actors in the scene. This is not a tutorial or infallible documentation: I claim no expertise in physics simulation nor any insider information regarding the engine’s design. It is merely the result of reading and stepping through engine code.</p></div><div class="el-p"><p dir="auto">This post was written by referencing the 5.1.0 release of Unreal’s source. It assumes familiarity with C++ and Unreal’s C++ API, and&nbsp;<a data-tooltip-position="top" aria-label="https://www.unrealengine.com/en-US/ue-on-github" rel="noopener nofollow" class="external-link is-unresolved" href="https://www.unrealengine.com/en-US/ue-on-github" target="_self">access to the Unreal Engine GitHub repository</a>&nbsp;(all of the GitHub links will 404 otherwise!).</p></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="소개" dir="auto" class="heading" id="소개_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>소개</h1></div><div class="el-p"><p dir="auto">There are two fundamental concepts that a game developer expects from any physics engine:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Simulation</strong>&nbsp;- Tracking and updating positions of actors in the scene, both in isolation and in relation to other actors (i.e. collisions)</li>
<li data-line="1" dir="auto"><strong>Interaction</strong>&nbsp;- The ability to query and modify the state of actors in the scene, both by configuring initial parameters and reacting to input at runtime</li>
</ol></div><div class="el-p"><p dir="auto">Simulation without interaction is an animation; interaction without simulation is data entry. From an engine architecture perspective, these concepts interrelate quite a bit. I have opted to organize the exploration of the framework into the following broad API interactions:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Actor Registration</strong>&nbsp;- Initializing the physics engine’s model of the scene, as well as adding/removing new actors to/from the model</li>
<li data-line="1" dir="auto"><strong>Ticking/Input</strong>&nbsp;- Prompting the physics engine to advance the simulation, taking into account any changes from user input, and handling the results</li>
<li data-line="2" dir="auto"><strong>Querying</strong>&nbsp;- Directly checking the state of the scene, e.g. line tracing, as well as being notified of physics events in the scene, e.g. collisions/overlaps</li>
</ol></div><div class="el-p"><p dir="auto">I will cover each of these in turn in the second section, but before that it’s necessary to enumerate the cast of characters that make this entire production come together.</p></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="주요 클래스" dir="auto" class="heading" id="주요_클래스_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>주요 클래스</h1></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161010.png" src="♣vaultstorage/attachment/pasted-image-20251130161010.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 650px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20251130161010.png" src="♣vaultstorage/attachment/pasted-image-20251130161010.png" target="_self" style="width: 650px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">In this section I will briefly cover the major classes that we’ll see as we explore the API interactions mentioned in the introduction. This is our high level overview of the structural relationships of the physics framework, before we start actually walking through it.</p></div><div class="el-h3"><h3 data-heading="The World" dir="auto" class="heading" id="The_World_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The World</h3></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L994" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L994" target="_self"><code>UWorld</code></a>&nbsp;is “the top level object representing a map in which Actors and Components will exist and be rendered.” This should be the most familiar of the classes noted here if you’ve spent any time at all working in Unreal with C++;&nbsp;<code>GetWorld()</code>&nbsp;might be the most frequently used API call in the engine. As is mentioned&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Engine/UWorld/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Engine/UWorld/" target="_self">in the documentation</a>, in general there is only one world at a time, but there can be more for various reasons, particularly in the editor. Blueprint nodes omit it as a parameter because their scope never makes it ambiguous which “World” they’re concerned with. For the purposes of this blog post we aren’t particularly concerned with the ramifications of a multiverse, but it’s good to keep in mind as we move deeper into the engine and see what a single&nbsp;<code>UWorld</code>&nbsp;holds.</p></div><div class="el-p"><p dir="auto">The documentation’s description of a&nbsp;<code>UWorld</code>&nbsp;is technically true, but belies a lot of what&nbsp;<code>UWorld</code>&nbsp;does, and does not do. For example,&nbsp;<code>UWorld</code>&nbsp;does not maintain an array of&nbsp;<code>AActor</code>s:&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/Level.h#L460" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/Level.h#L460" target="_self"><code>ULevel</code>&nbsp;does</a>. That is in fact&nbsp;<code>ULevel</code>’s primary purpose. But&nbsp;<code>ULevel</code>s don’t exist without a&nbsp;<code>UWorld</code>&nbsp;(<code>ULevel</code>&nbsp;is owned by&nbsp;<code>UWorld</code>), and&nbsp;<code>UWorld</code>&nbsp;provides the main interface for modifying the&nbsp;<code>AActor</code>&nbsp;list (e.g.&nbsp;<code>UWorld::SpawnActor()</code>). So, technically true. But we are concerned with how&nbsp;<code>UWorld</code>&nbsp;relates to the physics engine. Naturally, the most significant aspect is that&nbsp;<code>AActor</code>&nbsp;list, or more specifically their associated&nbsp;<code>FBodyInstance</code>s, which are the&nbsp;<code>AActor</code>s' physics representation. Less trivially&nbsp;<code>UWorld</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1520" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1520" target="_self">owns the&nbsp;<code>FPhysScene</code></a><sup data-footnote-id="fnref-1-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-1-c2e3f4e65869e5f3"><a data-footref="[inline0" href="#fn-1-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[1]</a></sup>, the stage for our proverbial physics performance.</p></div><div class="el-p"><p dir="auto">In addition to its position at the top of the object hierarchy,&nbsp;<code>UWorld</code>’s interface provides our entrypoint into all three of our API interactions:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Actor Registration</strong>:&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L3467" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L3467" target="_self"><code>SpawnActor()</code></a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L3446" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L3446" target="_self"><code>DestroyActor()</code></a>.</li>
<li data-line="1" dir="auto"><strong>Scene Ticking</strong>:&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1314" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1314" target="_self"><code>UWorld::Tick()</code></a>&nbsp;is responsible for kicking off every physics simulation step.</li>
<li data-line="2" dir="auto"><strong>Querying</strong>:&nbsp;<code>UWorld</code>&nbsp;contains&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1878" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1878" target="_self">a suite of methods</a>&nbsp;for performing trace, sweep, and overlap queries of the physics scene.</li>
</ol></div><div class="el-p"><p dir="auto">Each of these will be explored in further detail in their respective sections. As a side note, when spelunking in code it’s useful to remember that&nbsp;<code>UWorld</code>’s source is split across multiple .cpp files:&nbsp;<code>World.cpp</code>,&nbsp;<code>LevelActor.cpp</code>,&nbsp;<code>WorldCollisionAsync.cpp</code>,&nbsp;<code>PhysLevel.cpp</code>, and&nbsp;<code>LevelTick.cpp</code>.</p></div><div class="el-h3"><h3 data-heading="The Grand Stage" dir="auto" class="heading" id="The_Grand_Stage_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Grand Stage</h3></div><div class="el-p"><p dir="auto">The classes introduced in this section form a one-to-one, top-to-bottom object hierarchy, and are the major controllers between our recognizable Unreal API and the mathematics of the physics simulation. Naturally, between and within each level there are layers of abstraction, but these classes will be the key landmarks as we explore the major code paths in the following section.</p></div><div class="el-h4"><h4 data-heading="FPhysScene_Chaos" dir="auto" class="heading" id="FPhysScene_Chaos_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPhysScene_Chaos</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Physics/Experimental/FPhysScene_Chaos/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Physics/Experimental/FPhysScene_Chaos/" target="_self"><code>FPhysScene_Chaos</code></a>&nbsp;(inheriting from&nbsp;<code>FChaosScene</code>),&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L91" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L91" target="_self">AKA&nbsp;<code>FPhysScene</code></a>, is the primary interface to the physics simulation. It owns the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L279" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L279" target="_self">networked physics replication</a>&nbsp;handler (a subject for another time), handles&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L112" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L112" target="_self">registration</a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L748" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L748" target="_self">dispatch</a>&nbsp;of collision events (Querying), and provides the API used for actually&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L184" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysScene_Chaos.h#L184" target="_self">applying forces</a>&nbsp;to physics particles.</p></div><div class="el-p"><p dir="auto">More importantly than those duties, however, it provides the API for actually advancing the simulation (Ticking) that is called by&nbsp;<code>UWorld</code>&nbsp;with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/Chaos/ChaosScene.h#L137" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/Chaos/ChaosScene.h#L137" target="_self"><code>StartFrame()</code>&nbsp;and&nbsp;<code>EndFrame()</code></a>. It also&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L71" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L71" target="_self">creates</a>&nbsp;and owns&nbsp;<code>FPBDRigidsSolver</code>.</p></div><div class="el-h5"><h5 data-heading="FPhysInterface_Chaos" dir="auto" class="heading" id="FPhysInterface_Chaos_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPhysInterface_Chaos</h5></div><div class="el-p"><p dir="auto">An honorable mention is due for&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysInterface_Chaos.h#L32" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Public/Physics/Experimental/PhysInterface_Chaos.h#L32" target="_self"><code>FPhysInterface_Chaos</code></a>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L90" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L90" target="_self">AKA&nbsp;<code>FPhysicsInterface</code></a>. If you follow along with the code you will see it mentioned in various places, but I aggressively tried to gloss over it for ease of understanding because it is what it says on the tin: an interface to the more interesting physics classes, particularly&nbsp;<code>FPhysScene_Chaos</code>&nbsp;and Querying helpers.</p></div><div class="el-h4"><h4 data-heading="FPBDRigidsSolver" dir="auto" class="heading" id="FPBDRigidsSolver_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPBDRigidsSolver</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Chaos/FPBDRigidsSolver/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Chaos/FPBDRigidsSolver/" target="_self"><code>FPBDRigidsSolver</code></a>&nbsp;(inheriting from&nbsp;<code>FPhysicsSolverBase</code>),&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Declares.h#L10" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Declares.h#L10" target="_self">AKA&nbsp;<code>FPhysicsSolver</code></a>, is the last bastion standing between the “game engine” and the “physics engine”. It owns&nbsp;<code>FPBDRigidsEvolutionGBF</code>, the heart of the physics simulation;&nbsp;<code>FPBDRigidsSOAs</code>, the canonical collection of particles; and&nbsp;<code>FChaosMarshallingManager</code>, the harried middle-man juggling communications between various game threads to make the entire production come together.</p></div><div class="el-p"><p dir="auto">“PBD” stands for “Position Based Dynamics”, which is the real&nbsp;<a data-tooltip-position="top" aria-label="https://matthias-research.github.io/pages/publications/posBasedDyn.pdf" rel="noopener nofollow" class="external-link is-unresolved" href="https://matthias-research.github.io/pages/publications/posBasedDyn.pdf" target="_self">computer science PhD thesis</a>&nbsp;territory. Rest assured, exploring how PBD works and how Unreal implements it is far outside of the scope of this blog post. Suffice to say that this is the conceptual basis for the physics simulation.</p></div><div class="el-h5"><h5 data-heading="FPBDRigidsSOAs" dir="auto" class="heading" id="FPBDRigidsSOAs_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPBDRigidsSOAs</h5></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsSOAs.h#L190" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsSOAs.h#L190" target="_self"><code>FPBDRigidsSOAs</code></a>&nbsp;is our master list of physics particles. “SOA” stands for&nbsp;<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/AoS_and_SoA" rel="noopener nofollow" class="external-link is-unresolved" href="https://en.wikipedia.org/wiki/AoS_and_SoA" target="_self">“structure of arrays”</a>, a common memory layout optimization, and the plural “SOAs” refers to&nbsp;<code>FPBDRigidsSOAs</code>' pointers to different collections inheriting from&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/GeometryParticles.h#L428" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/GeometryParticles.h#L428" target="_self"><code>TGeometryParticlesImp</code></a>, e.g.&nbsp;<code>FGeometryParticles</code>,&nbsp;<code>FKinematicGeometryParticles</code>, or&nbsp;<code>TPBDGeometryCollectionParticles</code>. These Structures hold the Arrays that encode the data (position, mass, geometry, etc) for all of the particles in our scene.</p></div><div class="el-h5"><h5 data-heading="FChaosMarshallingManager" dir="auto" class="heading" id="FChaosMarshallingManager_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FChaosMarshallingManager</h5></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ChaosMarshallingManager.h#L248" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ChaosMarshallingManager.h#L248" target="_self"><code>FChaosMarshallingManager</code></a>&nbsp;manages queues of&nbsp;<code>FPushPhysicsData</code>&nbsp;and&nbsp;<code>FPullPhysicsData</code>&nbsp;structs, which are the vessels for transmitting updates from the game thread to the physics thread and vice versa. We will follow these more closely in the section on Ticking.</p></div><div class="el-h4"><h4 data-heading="FPBDRigidsEvolutionGBF" dir="auto" class="heading" id="FPBDRigidsEvolutionGBF_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPBDRigidsEvolutionGBF</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Chaos/Chaos/FPBDRigidsEvolutionGBF/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Chaos/Chaos/FPBDRigidsEvolutionGBF/" target="_self"><code>FPBDRigidsEvolutionGBF</code></a>&nbsp;(inheriting from&nbsp;<code>FPBDRigidsEvolutionBase</code>) is where the magic happens. It is where finally, a dozen abstraction layers down, we find&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L199" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L199" target="_self">recognizable equations for simulating physics</a>. Naturally, it holds a reference to the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/PBDRigidsEvolution.cpp#L191" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/PBDRigidsEvolution.cpp#L191" target="_self">Solver’s&nbsp;<code>FPBDRigidsSOAs</code>&nbsp;structure</a>, since that is the data that it is manipulating. Furthermore, it uses that particle data to maintain&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L355" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L355" target="_self">structures for accelerating collision detection</a>, i.e. “Broad Phase” optimization, along with other implementation-specific structures that we won’t be investigating.</p></div><div class="el-p"><p dir="auto">“GBF” stands for “Guendelman, Bridson, Fedkiw”, and refers to a&nbsp;<a data-tooltip-position="top" aria-label="https://graphics.stanford.edu/papers/rigid_bodies-sig03/" rel="noopener nofollow" class="external-link is-unresolved" href="https://graphics.stanford.edu/papers/rigid_bodies-sig03/" target="_self">paper by those authors</a>&nbsp;on collisions between rigid bodies. Like PBD, rest assured that the details fall outside the scope of this post.</p></div><div class="el-h3"><h3 data-heading="Dramatis Personae" dir="auto" class="heading" id="Dramatis_Personae_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Dramatis Personae</h3></div><div class="el-p"><p dir="auto">This section covers the classes that represent the objects in motion - the things that are being manipulated by the classes in the previous section.</p></div><div class="el-h4"><h4 data-heading="AActor" dir="auto" class="heading" id="AActor_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>AActor</h4></div><div class="el-p"><p dir="auto">If you haven’t at least heard of&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/GameFramework/Actor.h#L172" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/GameFramework/Actor.h#L172" target="_self"><code>AActor</code></a>, you probably haven’t made it this far into the blog post. These are the top level things in the level, the action figures we’re mashing together. As discussed in the&nbsp;<code>UWorld</code>&nbsp;section, the&nbsp;<code>ULevel</code>&nbsp;maintains the list of&nbsp;<code>AActor</code>s that exist in the world. The thing about&nbsp;<code>AActor</code>s that we are most interested in here, however, is their Components. Most importantly, we care if they have a&nbsp;<code>UPrimitiveComponent</code>. Without one of these, they have no effect on the physics simulation, and indeed do not exist from the point of the view of the physics engine.<sup data-footnote-id="fnref-2-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-2-c2e3f4e65869e5f3"><a data-footref="[inline1" href="#fn-2-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[2]</a></sup></p></div><div class="el-h4"><h4 data-heading="UPrimitiveComponent" dir="auto" class="heading" id="UPrimitiveComponent_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>UPrimitiveComponent</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L213" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L213" target="_self"><code>UPrimitiveComponent</code></a>&nbsp;is the parent class for components that contain geometry. This includes the familiar&nbsp;<code>UStaticMeshComponent</code>&nbsp;and&nbsp;<code>USkeletalMeshComponent</code>, which we might use solely for their rendered geometry, but also&nbsp;<code>USphereComponent</code>,&nbsp;<code>UBoxComponent</code>, and&nbsp;<code>UCapsuleComponent</code>, which are explicitly used for collisions, replacing or working in tandem with more complex geometry from Meshes. Regardless of which subclass we’re looking at, they all interact with the physics framework through&nbsp;<code>UPrimitiveComponent</code>’s&nbsp;<code>FBodyInstance</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L1177" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L1177" target="_self">member variable</a>.</p></div><div class="el-h4"><h4 data-heading="FBodyInstance" dir="auto" class="heading" id="FBodyInstance_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FBodyInstance</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L270" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L270" target="_self"><code>FBodyInstance</code></a>&nbsp;is a “container for a physics representation of an object”. They are directly owned by&nbsp;<code>UPrimitiveComponent</code>s, and they hold most of the properties that are set in the “Physics” and “Collisions” sections of the Details pane in the editor: collision channels/responses, transform constraints, mass/damping overrides, etc.</p></div><div class="el-p"><p dir="auto">Architecturally, there are three properties that are of particular interest. The first is&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/BodyInstanceCore.h#L20" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/BodyInstanceCore.h#L20" target="_self"><code>TWeakObjectPtr&lt;UBodySetupCore&gt; BodySetup</code></a>, which is a “cookie-cutter” for the&nbsp;<code>FBodyInstance</code>. We’ll cover&nbsp;<code>UBodySetup</code>&nbsp;(which inherits from&nbsp;<code>UBodySetupCore</code>) in more detail when we talk about actor registration. The second is&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L545" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L545" target="_self"><code>FBodyInstance* WeldParent</code></a>, which enables tree-like parent-child relationships between&nbsp;<code>FBodyInstance</code>s. We’ll see this used in our discussion later but we won’t follow it too closely. The third property is&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L588" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/BodyInstance.h#L588" target="_self"><code>FPhysicsActorHandle ActorHandle</code></a>, which&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L77" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Public/PhysicsInterfaceDeclaresCore.h#L77" target="_self">is actually</a>&nbsp;<code>FSingleParticlePhysicsProxy* ActorHandle</code>.</p></div><div class="el-h4"><h4 data-heading="FSingleParticlePhysicsProxy" dir="auto" class="heading" id="FSingleParticlePhysicsProxy_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FSingleParticlePhysicsProxy</h4></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L60" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L60" target="_self"><code>FSingleParticlePhysicsProxy</code></a>&nbsp;is our interface to the “particles” that are the objects that are actually being simulated by the physics engine. The physics engine doesn’t care what color something is or what team it’s on, it cares about pure geometric shapes, their positions, and which other things they interact with (i.e. their&nbsp;<a data-tooltip-position="top" aria-label="https://www.unrealengine.com/en-US/blog/collision-filtering" rel="noopener nofollow" class="external-link is-unresolved" href="https://www.unrealengine.com/en-US/blog/collision-filtering" target="_self">collision channels</a>). This is all held in the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2048" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2048" target="_self"><code>TGeometryParticle</code></a>&nbsp;which our Proxy holds a pointer to, which is the game thread’s representation of the physics particle. The proxy structure also holds a pointer to a&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L388" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L388" target="_self"><code>TGeometryParticleHandle</code></a>. This is a window into the physics thread’s representation of the particle. Remembering that the particle information for the physics thread is maintained in&nbsp;<code>FPBDRigidsSOAs</code>, a&nbsp;<code>TGeometryParticleHandle</code>&nbsp;holds a reference to a SOA (<code>TGeometryParticlesImp</code>) and an index into that structure’s arrays. These two pieces of information uniquely identify a single particle in the scene, and the ParticleHandle provides an interface for setting/getting properties (e.g. position) of that particle.</p></div><div class="el-p"><p dir="auto">There exist other types of physics proxies, including&nbsp;<code>FGeometryCollectionPhysicsProxy</code>&nbsp;(which are related to&nbsp;<a data-tooltip-position="top" aria-label="https://dev.epicgames.com/community/learning/tutorials/yrXz/unreal-engine-chaos-destruction-geometry-collections" rel="noopener nofollow" class="external-link is-unresolved" href="https://dev.epicgames.com/community/learning/tutorials/yrXz/unreal-engine-chaos-destruction-geometry-collections" target="_self">Chaos Destruction</a>),&nbsp;<code>FJointConstraintPhysicsProxy</code>, and&nbsp;<code>FSuspensionConstraintPhysicsProxy</code>. All of these inherit from the same base class&nbsp;<code>IPhysicsProxyBase</code>, so we will frequently see code for handling these types next to&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;inside switch statements at various points in the code. In general though,&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;is the most common and most representative case for basic physics simulation, so we won’t be paying much attention to the others in our investigation.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">파티클</div></div><div class="callout-content">
<p dir="auto">여기서 말하는 '파티클'은 언리얼의 물리 엔진인 '카오스 피직스'의 물리 연산 기본 단위(객체)로, 파티클 이펙트를 말하는 것이 아니다.<br>
보다 엄밀하게는, 카오스 피직스 시스템 안에서 질량, 위치, 속도를 가지고 시뮬레이션의 주체가 되는 강체를 말한다.</p>
</div></div></div><div class="el-hr"><hr></div><div class="el-h2"><h2 data-heading="API Interactions" dir="auto" class="heading" id="API_Interactions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>API Interactions</h2></div><div class="el-p"><p dir="auto">Before we dive into the code paths, a brief note on threads. Unreal Engine makes extensive use of multithreading in various ways. You may hear someone distinguish between the “Game” thread and the “Render” thread, which work in parallel for the duration of gameplay. In the context of physics we might make reference to the “physics thread”, but it is worth noting that there is no singular, capital P “Physics Thread” like there is for Game or Render - physics calculation tasks are dispatched to worker threads by the Game thread and managed as&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/tasks-systems-in-unreal-engine/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/tasks-systems-in-unreal-engine/" target="_self">Unreal’s scheduler</a>&nbsp;sees fit.</p></div><div class="el-h3"><h3 data-heading="0. Engine Initialization" dir="auto" class="heading" id="0._Engine_Initialization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>0. Engine Initialization</h3></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161249.png" src="♣vaultstorage/attachment/pasted-image-20251130161249.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130161249.png" src="♣vaultstorage/attachment/pasted-image-20251130161249.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Surprise, this wasn’t one of the things in the list in the introduction! Well, the implicit extra thing that a developer would expect from a physics engine’s API is for it to, you know, start up.</p></div><div class="el-p"><p dir="auto">First, there was nothing. But then came the Big Bang, and all of the stars in the sky. Skip forward a few years and we’ve just started up the Unreal Engine executable. Each platform has its own way of reaching it, but they all meet up in&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/Launch.cpp#L97" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/Launch.cpp#L97" target="_self"><code>GuardedMain()</code></a>. This function calls&nbsp;<code>FEngineLoop::PreInit()</code>, then&nbsp;<code>FEngineLoop::Init()</code>&nbsp;(or&nbsp;<code>EditorInit()</code>), then hops into a tight while-loop over&nbsp;<code>FEngineLoop::Tick()</code>&nbsp;until the end of time (or we quit, whichever comes first). Obviously there is a lot (read: the entire rest of the engine) going on in each of those functions that we’re ignoring, but it’s good to center ourselves in the knowledge that at the end of the day this is a program with a while loop in a&nbsp;<code>main</code>&nbsp;function like any other. For a deeper exploration of engine initialization, I recommend&nbsp;<a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=IaU2Hue-ApI" rel="noopener nofollow" class="external-link is-unresolved" href="https://www.youtube.com/watch?v=IaU2Hue-ApI" target="_self">“The Unreal Engine Game Framework: From int main() to BeginPlay”</a>&nbsp;by&nbsp;<a data-tooltip-position="top" aria-label="https://twitter.com/alexforsythe" rel="noopener nofollow" class="external-link is-unresolved" href="https://twitter.com/alexforsythe" target="_self">Alex Forsythe</a>.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L3937" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L3937" target="_self"><code>FEngineLoop::PreInit()</code></a>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L2703" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L2703" target="_self">calls</a>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L245" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L245" target="_self"><code>InitGamePhys()</code></a>. At one point this kicked off a lot of boilerplate for PhysX setup, but nowadays&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/PhysicsInitialization.cpp#L39" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/PhysicsInitialization.cpp#L39" target="_self">it simply loads</a>&nbsp;the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/ChaosModule.cpp#L15" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/ChaosModule.cpp#L15" target="_self"><code>Chaos</code></a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/ChaosSolverEngine/Private/Chaos/ChaosSolverEnginePlugin.cpp#L22" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/ChaosSolverEngine/Private/Chaos/ChaosSolverEnginePlugin.cpp#L22" target="_self"><code>ChaosSolverEngine</code></a>&nbsp;modules, the latter of which starts up&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/%60ChaosSolversModule%60.cpp#L98" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/%60ChaosSolversModule%60.cpp#L98" target="_self"><code>ChaosSolversModule</code></a>. I’m not particularly concerned with what each module packages for this investigation, so we will not be looking closely at these.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L4252" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L4252" target="_self"><code>FEngineLoop::Init()</code></a>&nbsp;is an extremely meaty function, but for our purposes it hits only a couple of key items. First it&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L4278" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L4278" target="_self">creates&nbsp;<code>GEngine</code></a>, the trusty global&nbsp;<code>UObject</code>&nbsp;that sits on a throne above even&nbsp;<code>UWorld</code>. It then uses&nbsp;<code>GEngine</code>&nbsp;to&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1106" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1106" target="_self">create</a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1219" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1219" target="_self">start</a>&nbsp;the&nbsp;<code>UGameInstance</code>.&nbsp;<code>UGameInstance::StartGameInstance()</code>&nbsp;is primarily concerned with loading the first<sup data-footnote-id="fnref-3-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-3-c2e3f4e65869e5f3"><a data-footref="[inline2" href="#fn-3-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[3]</a></sup>&nbsp;map, calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameInstance.cpp#L634" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameInstance.cpp#L634" target="_self"><code>UEngine::Browse()</code></a>&nbsp;(and thus&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/UnrealEngine.cpp#L14037" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/UnrealEngine.cpp#L14037" target="_self"><code>UEngine::LoadMap()</code></a>) on the default configured map.</p></div><div class="el-p"><p dir="auto">After that, we are out of the realm of engine bootstrapping, and now in the realm of runtime behavior.&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/UnrealEngine.cpp#L14318" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/UnrealEngine.cpp#L14318" target="_self"><code>UEngine::LoadMap()</code></a>&nbsp;is the central logic for loading a map during play, whether that’s through a manual&nbsp;<code>GEngine-&gt;Browse()</code>&nbsp;call or a&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.1/en-US/travelling-in-multiplayer-in-unreal-engine/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.1/en-US/travelling-in-multiplayer-in-unreal-engine/" target="_self">seamless travel</a>.&nbsp;<code>UEngine::LoadMap()</code>&nbsp;does a whole slew of interesting things, but the thing we care about most is that it creates our&nbsp;<code>UWorld</code>, and then calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L1817" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L1817" target="_self"><code>UWorld::InitWorld()</code></a>.&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L5368" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L5368" target="_self">This is where</a>&nbsp;our&nbsp;<code>FPhysScene</code>&nbsp;is constructed, which&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L71" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L71" target="_self">leverages the&nbsp;<code>ChaosSolversModule</code></a>&nbsp;to construct our&nbsp;<code>FPBDRigidsSolver</code>&nbsp;instance, which&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L489" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L489" target="_self">in turn constructs</a>&nbsp;our&nbsp;<code>FPBDRigidsEvolutionGBF</code>&nbsp;instance.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">부트스트래핑(Bootstrapping)</div></div><div class="callout-content">
<p dir="auto">컴퓨터공학에서, 스스로 기초적인 환경을 설정하고 더 복잡한 시스템을 실행할 준비를 마치는 초기화 단계를 말한다. 컴퓨터 '부팅'이 이 단어의 준말이다. 자신의 신발끈(bootstrap)을 잡아당겨 스스로 일어선다는 데서 유래.</p>
</div></div></div><div class="el-p"><p dir="auto">So the engine initializes our modules and starts up the&nbsp;<code>UGameInstance</code>, the&nbsp;<code>UGameInstance</code>&nbsp;starts up our&nbsp;<code>UWorld</code>, and our&nbsp;<code>UWorld</code>&nbsp;starts up our physics framework. There we have it: the stage is set. Except, aren’t we’re forgetting our esteemed&nbsp;<code>AActor</code>s and their moneymaking&nbsp;<code>FBodyInstance</code>s? What is a performance without our actors, waiting in the wings?</p></div><div class="el-h3"><h3 data-heading="1. Actor Registration" dir="auto" class="heading" id="1._Actor_Registration_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1. Actor Registration</h3></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161326.png" src="♣vaultstorage/attachment/pasted-image-20251130161326.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130161326.png" src="♣vaultstorage/attachment/pasted-image-20251130161326.png" target="_self"></span></p></div><div class="el-h4"><h4 data-heading="AActor Initialization" dir="auto" class="heading" id="AActor_Initialization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>AActor Initialization</h4></div><div class="el-p"><p dir="auto">Now that the physics engine has started up, it’s time to get the cast on stage and populate our scene with&nbsp;<code>FBodyInstance</code>s. There are two situations where we would expect to register actors: on level load, and when spawning them during runtime. Both situations meet up in the same place, but reach it from different directions.</p></div><div class="el-p"><p dir="auto">For the former case of registration on level load, a little bit after&nbsp;<code>UWorld::InitWorld()</code>&nbsp;is called in&nbsp;<code>UEngine::LoadMap()</code>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L4677" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/World.cpp#L4677" target="_self"><code>UWorld::InitializeActorsForPlay()</code></a>&nbsp;is called. This in turn calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Level.cpp#L1661" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Level.cpp#L1661" target="_self"><code>ULevel::IncrementalRegisterComponents()</code></a>, which iterates through all of the&nbsp;<code>AActor</code>s in the level, calling&nbsp;<code>AActor::IncrementalRegisterComponents()</code>&nbsp;on each of them. This function then calls&nbsp;<code>UActorComponent::RegisterComponentWithWorld()</code>&nbsp;on all of their components. A pretty straightforward initialization trickle-down from&nbsp;<code>UWorld</code>&nbsp;to&nbsp;<code>ULevel</code>&nbsp;to the&nbsp;<code>AActor</code>s to their&nbsp;<code>UActorComponent</code>s.</p></div><div class="el-p"><p dir="auto">For the latter case of registration on spawn,&nbsp;<code>UWorld::SpawnActor()</code>&nbsp;calls&nbsp;<code>AActor::PostSpawnInitialize()</code>&nbsp;on the spawned actor, which calls&nbsp;<code>AActor::IncrementalRegisterComponents()</code>, just like in the level load case. If the actor is a blueprint, however, it takes a slightly different route. At the end of&nbsp;<code>AActor::PostSpawnInitialize()</code>, it kicks off the blueprint actor construction process with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/ActorConstruction.cpp#L726" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/ActorConstruction.cpp#L726" target="_self"><code>ExecuteConstruction()</code></a>. A few steps down the call stack we hit&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/SimpleConstructionScript.cpp#L619" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/SimpleConstructionScript.cpp#L619" target="_self"><code>USimpleConstructionScript::RegisterInstancedComponent()</code></a>, which calls&nbsp;<code>UActorComponent::RegisterComponentWithWorld()</code>&nbsp;just like&nbsp;<code>AActor::IncrementalRegisterComponents()</code>&nbsp;does above.</p></div><div class="el-p"><p dir="auto">So in every case we find ourselves in&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/ActorComponent.cpp#L1290" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/ActorComponent.cpp#L1290" target="_self"><code>UActorComponent::RegisterComponentWithWorld()</code></a>. This is the path that any component on an actor would take to start up, whether or not it has anything to do with the physics engine. But, in case it&nbsp;<em>does</em>&nbsp;have something to do with the physics engine, that method calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/ActorComponent.cpp#L1595" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/ActorComponent.cpp#L1595" target="_self"><code>UActorComponent::CreatePhysicsState()</code></a>. Now we’re finally getting somewhere - it says “physics” right there! This function calls the virtual function&nbsp;<code>UActorComponent::OnCreatePhysicsState()</code>, which doesn’t do much, but if it’s a&nbsp;<code>UPrimitiveComponent</code>&nbsp;rather than simply a&nbsp;<code>UActorComponent</code>, things get a bit more interesting&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L790" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L790" target="_self">in the overridden function</a>. It is here that we finally find our masked phantom skulking in the rafters:&nbsp;<code>FBodyInstance::InitBody()</code>.</p></div><div class="el-h4"><h4 data-heading="FBodyInstance Initialization" dir="auto" class="heading" id="FBodyInstance_Initialization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FBodyInstance Initialization</h4></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161344.png" src="♣vaultstorage/attachment/pasted-image-20251130161344.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130161344.png" src="♣vaultstorage/attachment/pasted-image-20251130161344.png" target="_self"></span></p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1474" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1474" target="_self"><code>FBodyInstance::InitBody()</code></a>&nbsp;is where&nbsp;<code>FBodyInstance</code>&nbsp;comes to life, with the help of its dark underlings,&nbsp;<code>UBodySetup</code>&nbsp;and&nbsp;<code>FInitBodiesHelper</code>.</p></div><div class="el-h5"><h5 data-heading="FBodyInstance’s Lackeys" dir="auto" class="heading" id="FBodyInstance’s_Lackeys_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FBodyInstance’s Lackeys</h5></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/PhysicsEngine/UBodySetup/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/PhysicsEngine/UBodySetup/" target="_self"><code>UBodySetup</code></a>&nbsp;“contains all collision information that is associated with a single asset”. It holds the actual geometric data associated with a mesh. You can think of it as the template from which our&nbsp;<code>FBodyInstance</code>&nbsp;is stamped. When you select an option in the “Collision” menu in the&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/static-mesh-editor-ui-in-unreal-engine/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/static-mesh-editor-ui-in-unreal-engine/" target="_self">Static Mesh Editor UI</a>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Editor/StaticMeshEditor/Private/StaticMeshEditor.cpp#L1782" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Editor/StaticMeshEditor/Private/StaticMeshEditor.cpp#L1782" target="_self">you are directly</a>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Editor/UnrealEd/Private/GeomFitUtils.cpp#L412" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Editor/UnrealEd/Private/GeomFitUtils.cpp#L412" target="_self">modifying</a>&nbsp;the&nbsp;<code>UBodySetup</code>&nbsp;associated with that mesh.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/PhysicsEngine/FInitBodiesHelperBase/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/PhysicsEngine/FInitBodiesHelperBase/" target="_self"><code>FInitBodiesHelper</code></a>&nbsp;is a somewhat opaque class which ultimately does what it says on the tin, and does the actual initialization work when&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1359" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1359" target="_self"><code>FInitBodiesHelperBase::InitBodies()</code></a>&nbsp;is called by&nbsp;<code>FBodyInstance::InitBody()</code>. First and most importantly, it calls&nbsp;<code>FInitBodiesHelperBase::CreateShapesAndActors()</code>.</p></div><div class="el-h5"><h5 data-heading="Regarding “Actors” and “Shapes”" dir="auto" class="heading" id="Regarding_“Actors”_and_“Shapes”_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Regarding “Actors” and “Shapes”</h5></div><div class="el-p"><p dir="auto">To understand what&nbsp;<code>FInitBodiesHelperBase::CreateShapesAndActors()</code>&nbsp;does, we should first ask what these “Actors” and “Shapes” are that we’re creating. Briefly, a physics engine as often as possible would prefer to consider objects to be as&nbsp;<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Spherical_cow" rel="noopener nofollow" class="external-link is-unresolved" href="https://en.wikipedia.org/wiki/Spherical_cow" target="_self">simple as possible</a>. This simplifies the math a lot, but there’s only so far you can go with spheres and cubes.<sup data-footnote-id="fnref-4-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-4-c2e3f4e65869e5f3"><a data-footref="[inline3" href="#fn-4-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[4]</a></sup>&nbsp;For anything more complicated, we need a “<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Convex_polytope" rel="noopener nofollow" class="external-link is-unresolved" href="https://en.wikipedia.org/wiki/Convex_polytope" target="_self">convex</a>&nbsp;mesh”, which, much like in rendering, is a 3D “object” made out of triangles. Either way, pure sphere or mesh, these are the “Shapes” that are being created here - representations of our 3D geometry. “Shapes” in this sense are represented by two data types:&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ImplicitObject.h#L136" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ImplicitObject.h#L136" target="_self"><code>FImplicitObject</code></a>&nbsp;(and its inheritors) and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/GeometryParticles.h#L41" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/GeometryParticles.h#L41" target="_self"><code>FPerShapeData</code></a>.&nbsp;<code>FImplicitObject</code>&nbsp;contains the actual geometric data about a shape - a sphere’s&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Sphere.h#L390" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Sphere.h#L390" target="_self">position</a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ImplicitObject.h#L404" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ImplicitObject.h#L404" target="_self">radius</a>, for instance.&nbsp;<code>FPerShapeData</code>&nbsp;carries other important data about these shapes that isn’t their pure geometry, such as their&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/4.26/en-US/InteractiveExperiences/Physics/PhysicalMaterials/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/4.26/en-US/InteractiveExperiences/Physics/PhysicalMaterials/" target="_self">Physical Material</a>&nbsp;and their collision response channels.</p></div><div class="el-p"><p dir="auto">“Actors” in this context are objects that hold collections of Shapes, and maintain data about their own position. These are&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L60" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L60" target="_self"><code>FSingleParticlePhysicsProxy</code></a>&nbsp;objects. It is my assumption that in this level of the engine, “actor” (as in&nbsp;<code>FBodyInstance::CreateActor()</code>) is roughly synonymous with “particle”. In general the term “actor” is not used at a lower level than in&nbsp;<code>FBodyInstance</code>.&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;objects are a pretty critical aspect of the physics framework, but they are primarily an interface to the two pointers they hold:&nbsp;<code>TGeometryParticle</code>&nbsp;and&nbsp;<code>TGeometryParticleHandle</code>. As we touched on before,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2048" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2048" target="_self"><code>TGeometryParticle</code></a>&nbsp;is the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L146" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L146" target="_self">game thread</a>&nbsp;representation of a physics particle, while&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L388" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L388" target="_self"><code>TGeometryParticleHandle</code></a>&nbsp;is the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L98" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L98" target="_self">physics thread</a>&nbsp;representation. Both hold data about the particle’s position, and maintain an array of&nbsp;<code>FPerShapeData</code>&nbsp;objects. At this point, we are operating in the game thread, and only the&nbsp;<code>TGeometryParticle</code>&nbsp;is pertinent, or even set. The&nbsp;<code>TGeometryParticleHandle</code>&nbsp;will come into play later.</p></div><div class="el-h5"><h5 data-heading="CreateShapesAndActors" dir="auto" class="heading" id="CreateShapesAndActors_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>CreateShapesAndActors</h5></div><div class="el-p"><p dir="auto">The first thing that&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1255" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1255" target="_self"><code>FInitBodiesHelperBase::CreateShapesAndActors()</code></a>&nbsp;does is call&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodySetup.cpp#L400" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodySetup.cpp#L400" target="_self"><code>UBodySetup::CreatePhysicsMeshes()</code></a>, which loads the convex meshes for our not-so-simple physics shapes. Most of the time this will have been called for each&nbsp;<code>UBodySetup</code>&nbsp;as the level is loading, in which case it skips the work here. With confidence that the shape data is available, it then checks if the&nbsp;<code>FBodyInstance</code>&nbsp;has a parent, in which case they should be “welded” together. Welding adds a lot of complexity to our structures, but at the end of the day it is doing a lot of bookkeeping to add the “Shapes” of the child body to the parent body’s “Actor”. If it does indeed need to do some welding, it does that now and the function exits out here, because the weld logic handles setting up the actors and shapes. If it doesn’t need to weld, then the time for that is now: it calls&nbsp;<code>FInitBodiesHelperBase::CreateActor_AssumesLocked()</code>&nbsp;and then&nbsp;<code>FInitBodiesHelperBase::CreateShapes_AssumesLocked()</code>.&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1178" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1178" target="_self"><code>CreateActor_AssumesLocked()</code></a>&nbsp;creates our&nbsp;<code>FGeometryParticle</code>, and generates the&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;“Actor Handle” to hold the reference to it.&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1217" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1217" target="_self"><code>CreateShapes_AssumesLocked</code></a>&nbsp;adds the&nbsp;<code>FPerShapeData</code>&nbsp;and&nbsp;<code>FImplicitObject</code>&nbsp;entries associated with our geometry to the&nbsp;<code>FGeometryParticle</code>.</p></div><div class="el-h5"><h5 data-heading="The Rest of InitBodies" dir="auto" class="heading" id="The_Rest_of_InitBodies_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Rest of InitBodies</h5></div><div class="el-p"><p dir="auto">Now that&nbsp;<code>CreateShapesAndActors()</code>&nbsp;is out of the way, we can move into the rest of&nbsp;<code>FInitBodiesHelperBase::InitBodies()</code>. Assuming that we did not do any welding (since that implies the parent body’s actor has already been added), it’s time to add our actors to the scene. We enter into a&nbsp;<code>FPhysicsCommand::ExecuteWrite()</code>&nbsp;lambda expression, which is a simple mutex pattern to lock our&nbsp;<code>FPhysScene</code>&nbsp;object, and do a few simple things. First it does a bit of bookkeeping for the bodies about collision traces and collision enabled enums. Then it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L273" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L273" target="_self"><code>FChaosScene::AddActorsToScene_AssumesLocked()</code></a>, which calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L520" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L520" target="_self"><code>FPBDRigidsSolver::RegisterObject()</code></a>&nbsp;on our&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;- more on that later, but with this done, the actor is now Known by the physics engine and ready to be simulated. Finally,&nbsp;<code>InitBodies()</code>&nbsp;registers our actor for collision events with&nbsp;<code>FPhysScene</code>.</p></div><div class="el-p"><p dir="auto">So to sum up, when&nbsp;<code>AActor</code>s are created their components are initialized; if a component is a&nbsp;<code>UPrimitiveComponent</code>&nbsp;it initializes an&nbsp;<code>FBodyInstance</code>, which generates a physics particle&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;and its associated geometry, and then adds the particle to our physics representation via&nbsp;<code>FPBDRigidsSolver</code>.</p></div><div class="el-h4"><h4 data-heading="Actor Destruction" dir="auto" class="heading" id="Actor_Destruction_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Actor Destruction</h4></div><div class="el-p"><p dir="auto">With all that setup, I’d be remiss if I didn’t briefly discuss what happens when an actor is destroyed. Generally this will happen when&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelActor.cpp#L795" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelActor.cpp#L795" target="_self"><code>UWorld::DestroyActor()</code></a>&nbsp;is called. That function does quite a bit of bookkeeping, most of which the physics engine does not even remotely care about. What it does care about, though, is when it calls&nbsp;<code>UActorComponent::UnregisterComponent()</code>. This isn’t only called by actor destruction, but no matter how we reach it it spells the end of the line for our&nbsp;<code>UPrimitiveComponent</code>&nbsp;and its attached&nbsp;<code>FBodyInstance</code>.&nbsp;<code>UnregisterComponent()</code>&nbsp;calls&nbsp;<code>ExecuteUnregisterEvents()</code>, which calls&nbsp;<code>DestroyPhysicsState()</code>, which calls the virtual&nbsp;<code>OnDestroyPhysicsState()</code>. This is a no-op for a&nbsp;<code>UActorComponent</code>, but&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L927" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L927" target="_self">is overridden</a>&nbsp;by&nbsp;<code>UPrimitiveComponent</code>&nbsp;to unweld the&nbsp;<code>FBodyInstance</code>&nbsp;from any parents or children and call&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1546" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1546" target="_self"><code>FBodyInstance::TermBody()</code></a>. This prompts the&nbsp;<code>FPhysScene</code>&nbsp;to do some of its bookkeeping, and finally culminates in&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L562" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L562" target="_self"><code>FPBDRigidsSolver::UnregisterObject()</code></a>, which manages all of the final bookkeeping to remove our&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;from any low level structures it could be cluttering up.</p></div><div class="el-h3"><h3 data-heading="2. Scene Tick" dir="auto" class="heading" id="2._Scene_Tick_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2. Scene Tick</h3></div><div class="el-p"><p dir="auto"><img src="https://itscai.us/blog/img/ue-physics-framework/physics-tick-sequence.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">In this section we’re going as deep as we need to into these caves until we find something that reflects our intuition of how any physics simulation would work: iterating over a list of objects and updating their positions.</p></div><div class="el-p"><p dir="auto">If you’ve made it this far in such a dry post about the Unreal Engine you are hopefully familiar with the concept of Ticking. Back in&nbsp;<code>GuardedMain()</code>&nbsp;at the tippy-top of the call stack, the Unreal program is running&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L5060" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L5060" target="_self"><code>FEngineLoop::Tick()</code></a>&nbsp;as frequently as possible until the end of time. A whole lot of stuff happens in that function as it juggles the concerns of the renderer, statistics, and who knows what else, but&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L5361" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Launch/Private/LaunchEngineLoop.cpp#L5361" target="_self">smack in the middle</a>&nbsp;of that function it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1632" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1632" target="_self"><code>UGameEngine::Tick()</code></a>. Just like its parent,&nbsp;<code>UGameEngine::Tick()</code>&nbsp;has a lot of concerns, but most importantly to us is when it iterates over its list of&nbsp;<code>UWorld</code>s,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1775" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameEngine.cpp#L1775" target="_self">calling</a>&nbsp;<code>UWorld::Tick()</code>&nbsp;on each in turn.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1314" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1314" target="_self"><code>UWorld::Tick()</code></a>&nbsp;starts off slow with a lot of bookkeeping, but things start to heat up when it begins&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1505" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1505" target="_self">iterating over</a>&nbsp;its&nbsp;<code>ULevel</code>&nbsp;collection. Here we find what may be some&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.1/en-US/actor-ticking-in-unreal-engine/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.1/en-US/actor-ticking-in-unreal-engine/" target="_self">familiar enums</a>&nbsp;if you’ve done any kind of advanced work with actor ticking: the “tick group” enums&nbsp;<code>TG_PrePhysics</code>,&nbsp;<code>TG_DuringPhysics</code>, and&nbsp;<code>TG_PostPhysics</code>, along with their less famous (but lowkey more important) brethren&nbsp;<code>TG_StartPhysics</code>&nbsp;and&nbsp;<code>TG_EndPhysics</code>. This is where&nbsp;<code>UWorld</code>&nbsp;executes tick handlers for each value in turn: all of the tick groups are purely for positioning the tick callbacks relative to the physics tick, as immediately as possible. Each of these steps are run with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/TickTaskManager.cpp#L1587" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/TickTaskManager.cpp#L1587" target="_self"><code>FTickTaskManager::RunTickGroup()</code></a>.</p></div><div class="el-p"><p dir="auto">Briefly,&nbsp;<code>FTickTaskManager</code>&nbsp;manages asynchronous execution of its registered tasks, and allows tick functions to be registered in the various enumerated stages. This is precisely what&nbsp;<code>UWorld</code>&nbsp;does when it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L82" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L82" target="_self"><code>UWorld::SetupPhysicsTickFunctions()</code></a>&nbsp;just&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1527" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/LevelTick.cpp#L1527" target="_self">a few lines up</a>&nbsp;from the first&nbsp;<code>RunTickGroup()</code>&nbsp;call. This registers&nbsp;<code>FStartPhysicsTickFunction</code>&nbsp;and&nbsp;<code>FEndPhysicsTickFunction</code>&nbsp;with&nbsp;<code>FTickTaskManager</code>&nbsp;in the&nbsp;<code>TG_StartPhysics</code>&nbsp;and&nbsp;<code>TG_EndPhysics</code>&nbsp;groups respectively. Immediately after those are registered&nbsp;<code>UWorld</code>&nbsp;calls&nbsp;<code>FTickTaskManager::StartFrame()</code>, which queues up all of the registered tick functions, which are then dispatched in turn by each execution of&nbsp;<code>RunTickGroup()</code>. By default&nbsp;<code>AActor</code>s tick first, in the&nbsp;<code>TG_PrePhysics</code>&nbsp;group. After that, in the&nbsp;<code>TG_StartPhysics</code>&nbsp;group, is where&nbsp;<code>FStartPhysicsTickFunction</code>&nbsp;gets executed. This is where the magic happens.</p></div><div class="el-h4"><h4 data-heading="The Physics Frame" dir="auto" class="heading" id="The_Physics_Frame_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Physics Frame</h4></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161427.png" src="♣vaultstorage/attachment/pasted-image-20251130161427.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130161427.png" src="♣vaultstorage/attachment/pasted-image-20251130161427.png" target="_self"></span></p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L168" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/PhysLevel.cpp#L168" target="_self"><code>FStartPhysicsTickFunction::ExecuteTick()</code></a>&nbsp;does only one thing, but it does it well: it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L348" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L348" target="_self"><code>FChaosScene::StartFrame()</code></a>.&nbsp;<code>StartFrame()</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1620" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1620" target="_self">starts off its day</a>&nbsp;lazily, letting its friend&nbsp;<code>FPhysicsReplication</code>&nbsp;and anyone subscribed to its&nbsp;<code>OnPhysScenePreTick</code>&nbsp;or&nbsp;<code>OnPhysSceneStep</code>&nbsp;events know that it’s totally, definitely about to get some work done today, and maybe they should get started as well.<sup data-footnote-id="fnref-5-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-5-c2e3f4e65869e5f3"><a data-footref="[inline4" href="#fn-5-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[5]</a></sup>&nbsp;With all of that hard work done, it lets&nbsp;<code>FPhysicsSolverBase</code>&nbsp;know that it’s time to&nbsp;<code>AdvanceAndDispatch_External()</code>, and then tucks itself back into bed.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L338" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L338" target="_self"><code>FPhysicsSolverBase::AdvanceAndDispatch_External()</code></a>&nbsp;starts off with some deltatime bookkeeping, including some setup for&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/physics-sub-stepping-in-unreal-engine/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/physics-sub-stepping-in-unreal-engine/" target="_self">physics substepping</a>. After this it calls&nbsp;<code>FPBDRigidsSolver::PushPhysicsState()</code>. This is a critical step which starts the process of synchronizing the physics thread’s models of the particles with the game thread’s ahead of the calculations. Finally, it queues (or&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L462" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L462" target="_self">directly calls</a>, if single-threaded) three consecutive tasks:&nbsp;<code>FPhysicsSolverProcessPushDataTask</code>,&nbsp;<code>FPhysicsSolverFrozenGTPreSimCallbacks</code>, and&nbsp;<code>FPhysicsSolverAdvanceTask</code>, which call&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L83" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L83" target="_self"><code>ProcessPushData()</code></a>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L103" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L103" target="_self"><code>GTPreSimCallbacks()</code></a>, and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L122" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L122" target="_self"><code>AdvanceSolver()</code></a>&nbsp;respectively. We’ll revisit&nbsp;<code>ProcessPushData()</code>&nbsp;in the following section, and we’re going to gloss over&nbsp;<code>GTPreSimCallbacks()</code>&nbsp;- it is a fairly self explanatory callback entrypoint. We’ve got a golden idol to find, and&nbsp;<code>AdvanceSolver()</code>&nbsp;knows which way to go!</p></div><div class="el-p"><p dir="auto"><code>AdvanceSolver()</code>&nbsp;kicks us over to&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L316" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L316" target="_self"><code>AdvanceOneTimeStepTask::DoWork()</code></a>, which first does a lot of work setting up various structures for the physics calculation, but critically calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/PBDRigidsEvolutionGBF.cpp#L305" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/PBDRigidsEvolutionGBF.cpp#L305" target="_self"><code>FPBDRigidsEvolutionGBF::AdvanceOneTimeStep()</code></a>, which is where the real, actual calculation is done for PBD physics simulation. I promised (both you and myself) that the details of that are out of scope, so if you’re looking to dive into the real nitty gritty of the physics simulation that is the place to do it. Suffice to say that this is where&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L173" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L173" target="_self"><code>FPBDRigidsEvolutionGBF::Integrate()</code></a>&nbsp;is called, which is where, for each particle in our&nbsp;<code>FPBDRigidsSOAs</code>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L199" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L199" target="_self">acceleration begets velocity</a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L259" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L259" target="_self">velocity begets position</a>, just&nbsp;<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Newtonian_mechanics" rel="noopener nofollow" class="external-link is-unresolved" href="https://en.wikipedia.org/wiki/Newtonian_mechanics" target="_self">as the prophets foretold</a>.</p></div><div class="el-p"><p dir="auto">Phew! It took us a while and most of our ropes and bombs to spelunk down these caves, but finally we’ve hit paydirt and found that golden idol, and everything has moved one time step. Now all that’s left is to find our way back out again. That is to say, the physics engine has shuffled everything around as requested, but who’s going to let the game engine know? After all, we care about&nbsp;<code>AActor</code>s, not&nbsp;<code>TGeometryParticleHandle</code>s!</p></div><div class="el-h4"><h4 data-heading="Push and Pull: Moving Data" dir="auto" class="heading" id="Push_and_Pull_Moving_Data_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Push and Pull: Moving Data</h4></div><div class="el-p"><p dir="auto">Before we can talk about how we get information&nbsp;<em>out</em>&nbsp;of the physics engine, we need to talk about how information gets&nbsp;<em>in</em>. In the previous section we were chasing the critical path of&nbsp;<em>logic</em>, sniffing out which function calls actually led to&nbsp;<code>x += v * dt</code>. In this section we will take a closer look at the critical path of&nbsp;<em>data</em>: how inputs become outputs.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ChaosMarshallingManager.h#L248" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ChaosMarshallingManager.h#L248" target="_self"><code>FChaosMarshallingManager</code></a>&nbsp;is the unsung workhorse that keeps this entire operation running smoothly. Wielding&nbsp;<code>FPushPhysicsData</code>&nbsp;in one hand and&nbsp;<code>FPullPhysicsData</code>&nbsp;in the other, it deftly controls the flow of data between the game and physics threads. “Pushing” and “Pulling” in this context are from the point of view of the game thread: the physics engine is a black box that we “push” our inputs into, and “pull” the results out of.</p></div><div class="el-h5"><h5 data-heading="FPushPhysicsData" dir="auto" class="heading" id="FPushPhysicsData_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPushPhysicsData</h5></div><div class="el-p"><p dir="auto">Once things are underway, the physics engine has a pretty good idea of what’s going on in the scene. In many ways it is the canonical version of the scene - the other parts of Unreal have to take the physics engine on its word that the actor is in a different place than it was in the last tick. After all, it’s the one that’s keeping track of these crazy “forces” and “colliders”. Left to its own devices the physics engine is perfectly happy to keep plugging away without taking in any more input, but that is purely Simulation. We were promised Interaction! There are two situations where we need to Push to the physics simulation: when we add or remove something from the simulation, and when we directly modify something that is already in the simulation.</p></div><div class="el-p"><p dir="auto">We’ve already talked about adding and removing actors to and from the scene. In that section we talked mostly about the structures that are created for the physics representation of an actor, and glossed over what&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L520" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L520" target="_self"><code>FPBDRigidsSolver::RegisterObject()</code></a>&nbsp;does after we call&nbsp;<code>FChaosScene::AddActorsToScene()</code>. Well I’m here now to tell you that it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/PhysicsSolverBase.h#L232" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/PhysicsSolverBase.h#L232" target="_self"><code>FPhysicsSolverBase::AddDirtyProxy()</code></a>, which sticks the&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;we created into&nbsp;<code>FPushPhysicsData</code>’s&nbsp;<code>DirtyProxiesDataBuffer</code>.</p></div><div class="el-p"><p dir="auto">Before we follow that thought further, let’s look at the other situation: directly modifying something already in the simulation. There are a lot of ways that this can be done in practice, so we’ll talk about one that I think is fairly elucidating: moving your character.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130161446.png" src="♣vaultstorage/attachment/pasted-image-20251130161446.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130161446.png" src="♣vaultstorage/attachment/pasted-image-20251130161446.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">We’ll start specifically from&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/DefaultPawn.cpp#L170" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/DefaultPawn.cpp#L170" target="_self"><code>ADefaultPawn::MoveForward()</code></a>, which is what is called when you hold the W key. This function simply updates&nbsp;<code>APawn</code>’s&nbsp;<code>ControlInputVector</code>&nbsp;field, which&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L104" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L104" target="_self">is applied to</a>&nbsp;<code>APawn</code>’s&nbsp;<code>Velocity</code>&nbsp;field when the Pawn&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L42" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L42" target="_self">Ticks</a>&nbsp;(in&nbsp;<code>TG_PrePhysics</code>!), which&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L42" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/FloatingPawnMovement.cpp#L42" target="_self">triggers</a>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/SceneComponent.cpp#L3019" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/SceneComponent.cpp#L3019" target="_self">an update</a>&nbsp;of the associated&nbsp;<code>USceneComponent</code>s, resulting in&nbsp;<code>OnUpdateTransform()</code>&nbsp;being called for that component. And similarly to what we saw when registering our actors, if it is a&nbsp;<code>UPrimitiveComponent</code>&nbsp;rather than simply a&nbsp;<code>USceneComponent</code>,&nbsp;<code>OnUpdateTransform()</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L916" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L916" target="_self">interacts with</a>&nbsp;our&nbsp;<code>FBodyInstance</code>, calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L2401" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L2401" target="_self"><code>FBodyInstance::SetBodyTransform()</code></a>. This calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L202" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/PhysicsProxy/SingleParticlePhysicsProxy.h#L202" target="_self"><code>SetX()</code></a>&nbsp;on the&nbsp;<code>FSingleParticlePhysicsProxy</code>, which changes the position value of the particle and then&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Properties.h#L70" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Properties.h#L70" target="_self">marks it as dirty</a>, calling the same&nbsp;<code>FPhysicsSolverBase::AddDirtyProxy()</code>&nbsp;that we saw when we registered our actor above!<sup data-footnote-id="fnref-6-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-6-c2e3f4e65869e5f3"><a data-footref="[inline5" href="#fn-6-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[6]</a></sup></p></div><div class="el-h6"><h6 data-heading="PushPhysicsState" dir="auto" class="heading" id="PushPhysicsState_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>PushPhysicsState</h6></div><div class="el-p"><p dir="auto">So no matter how gently we modify our game state, the end result as far as the physics engine is concerned is that we’ve “dirtied” one of its precious Physics Proxies. We come to the physics engine hat in hand with an itemized list of the toys we played with when we call&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L982" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L982" target="_self"><code>FPBDRigidsSolver::PushPhysicsState()</code></a>. For each item in the&nbsp;<code>DirtyProxiesDataBuffer</code>, it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2333" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2333" target="_self"><code>TGeometryParticle::SyncRemoteData()</code></a>, which goes over the properties on the particle (such as its position) and calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleDirtyFlags.h#L975" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleDirtyFlags.h#L975" target="_self"><code>FDirtyChaosProperties::SyncRemote()</code></a>&nbsp;on them. If that particular property is dirty,<sup data-footnote-id="fnref-7-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-7-c2e3f4e65869e5f3"><a data-footref="[inline6" href="#fn-7-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[7]</a></sup> it updates a value in the&nbsp;<code>FDirtyPropertiesManager</code>, a member of&nbsp;<code>FPushPhysicsData</code>.</p></div><div class="el-h6"><h6 data-heading="ProcessPushData" dir="auto" class="heading" id="ProcessPushData_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>ProcessPushData</h6></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162218.png" src="♣vaultstorage/attachment/pasted-image-20251130162218.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162218.png" src="♣vaultstorage/attachment/pasted-image-20251130162218.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Let’s recall our context here.&nbsp;<code>UWorld::Tick()</code>&nbsp;running the&nbsp;<code>TG_StartPhysics</code>&nbsp;group kicked off&nbsp;<code>FPhysicsSolverBase::AdvanceAndDispatch_External()</code>, which calls&nbsp;<code>PushPhysicsState()</code>, and then dispatches tasks to consecutively run&nbsp;<code>ProcessPushData()</code>,&nbsp;<code>GTPreSimCallbacks()</code>, and&nbsp;<code>AdvanceSolver()</code>, the latter of which we discussed in the previous section. It’s now time that we circle back on&nbsp;<code>ProcessPushData()</code>.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L83" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/Framework/PhysicsSolverBase.cpp#L83" target="_self"><code>ProcessPushData()</code></a>&nbsp;does a bit of bookkeeping (notably applying physics-related&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/4.26/en-US/ProductionPipelines/DevelopmentSetup/Tools/ConsoleManager/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/4.26/en-US/ProductionPipelines/DevelopmentSetup/Tools/ConsoleManager/" target="_self">console variables</a>), but we are most interested in it calling&nbsp;<code>FPBDRigidsSolver::ProcessPushedData_Internal()</code>. This is where all of the data that&nbsp;<code>FPushPhysicsData</code>&nbsp;holds is consumed. The work that we are concerned with is performed in&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1089" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1089" target="_self"><code>ProcessSinglePushedData_Internal()</code></a>. This function iterates over&nbsp;<code>PushData.DirtyProxiesDataBuffer</code>&nbsp;(recalling that this is the collection of our dirty&nbsp;<code>FSingleParticlePhysicsProxy</code>s), and first checks if the Proxy is uninitialized, which means we’ve just created it. If it is, then this is where it generates our&nbsp;<code>TGeometryParticleHandle</code>&nbsp;- the physics thread’s representation of the particle - and attaches it to the Proxy. In this case, the particle still does not exist in any of the SOA structures, but this is soon resolved by calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1170" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1170" target="_self"><code>FPBDRigidsSOAs::CreateStaticParticles()</code></a>. After this, whether it’s new or not, it calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PhysicsProxy/SingleParticlePhysicsProxy.cpp#L44" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PhysicsProxy/SingleParticlePhysicsProxy.cpp#L44" target="_self"><code>FSingleParticlePhysicsProxy::PushToPhysicsState()</code></a>. This is where the Properties that we dirtied are applied to the physics model: by calling functions like&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L131" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolutionGBF.h#L131" target="_self"><code>FPDBRigidsEvolutionGBF::SetParticleTransform()</code></a>, which ultimately&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L1395" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L1395" target="_self">calls&nbsp;<code>TGeometryParticleHandle::X()</code></a>, we move the “dirty” property information from the&nbsp;<code>FDirtyPropertiesManager</code>&nbsp;- set from the game thread’s model of the particle - into the physics thread’s model (<code>FPBDRigidsSOAs</code>) of the particle.</p></div><div class="el-p"><p dir="auto">And that’s as far as we’re following the data down the rabbit hole! Content in the knowledge that our updates made it into&nbsp;<code>FPBDRigidsSOAs</code>, we can ignore the screams as they are processed by&nbsp;<code>FPDBRigidsEvolutionGBF</code>; what the physics engine does behind closed doors is its own business.</p></div><div class="el-h5"><h5 data-heading="FPullPhysicsData" dir="auto" class="heading" id="FPullPhysicsData_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>FPullPhysicsData</h5></div><div class="el-p"><p dir="auto">Once the precocious physics gremlin in the black box is done with whatever he does in there, he slides out the results using&nbsp;<code>FPullPhysicsData</code>. This structure holds a collection of all of the changes made in a particular simulation step. Every single thing that moved in this physics frame needs to be notified so we can change those shiny glowing pixels on the screen!</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162238.png" src="♣vaultstorage/attachment/pasted-image-20251130162238.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162238.png" src="♣vaultstorage/attachment/pasted-image-20251130162238.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Let’s recenter ourselves again. We were just discussing the&nbsp;<code>ProcessPushData()</code>&nbsp;task that is kicked off by&nbsp;<code>FPhysicsSolverBase::AdvanceAndDispatch_External()</code>, preceding the&nbsp;<code>AdvanceSolver()</code>&nbsp;task. Let’s zoom back in on&nbsp;<code>AdvanceSolver()</code>&nbsp;now, all the way down to&nbsp;<code>AdvanceOneTimeStepTask::DoWork()</code>, where we’ve&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L394" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L394" target="_self">just executed</a>&nbsp;<code>FPBDRigidsEvolutionGBF::AdvanceOneTimeStep()</code>, which was where the actual Integration for the physics simulation happens. The physics engine has done it’s work, now all that’s left to do is pull the results out.&nbsp;<code>DoWork()</code>&nbsp;calls some functions to clean up after itself, and finally calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1393" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L1393" target="_self"><code>FPBDRigidsSolver::CompleteSceneSimulation()</code></a>. This function is responsible for assembling our results to be consumed via&nbsp;<code>FPBDRigidsSolver::BufferPhysicsResults()</code>.<sup data-footnote-id="fnref-8-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-8-c2e3f4e65869e5f3"><a data-footref="[inline7" href="#fn-8-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[8]</a></sup>&nbsp;fetches the “dirty particles” (this time “dirty” is from the game thread’s point of view) using&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsSOAs.h#L775" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsSOAs.h#L775" target="_self"><code>FPBDRigidsSOAs::GetDirtyParticlesView()</code></a>&nbsp;and populates&nbsp;<code>FPullPhysicsData::DirtyRigids()</code>&nbsp;with the position and velocity information for each dirty particle by calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PhysicsProxy/SingleParticlePhysicsProxy.cpp#L214" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PhysicsProxy/SingleParticlePhysicsProxy.cpp#L214" target="_self"><code>FSingleParticlePhysicsProxy::BufferPhysicsResults()</code></a>. Finally, back up in&nbsp;<code>FPBDRigidsSolver::AdvanceSolverBy()</code>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/ChaosMarshallingManager.cpp#L31" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/Chaos/ChaosMarshallingManager.cpp#L31" target="_self"><code>FChaosMarshallingManager::PreparePullData()</code></a>&nbsp;is called to enqueue our simulation step’s PullData to be consumed.</p></div><div class="el-p"><p dir="auto">Now that our&nbsp;<code>FPullPhysicsData</code>&nbsp;has been populated and enqueued, we can crawl up (down?) the call stack all the way back to&nbsp;<code>UWorld::Tick()</code>. We’re finally done with the&nbsp;<code>TG_StartPhysics</code>&nbsp;tick group! Take a deep breath, the air is much cleaner up here. Don’t dawdle too long though, because with that done we’re immediately diving right back down into the&nbsp;<code>TG_EndPhysics</code>&nbsp;tick group!</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162314.png" src="♣vaultstorage/attachment/pasted-image-20251130162314.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162314.png" src="♣vaultstorage/attachment/pasted-image-20251130162314.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Mirroring its brother&nbsp;<code>Start</code>,&nbsp;<code>FEndPhysicsTickFunction</code>&nbsp;simply calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L451" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L451" target="_self"><code>FChaosScene::EndFrame()</code></a>. And much like how&nbsp;<code>StartFrame()</code>&nbsp;iterated over each Solver calling&nbsp;<code>AdvanceAndDispatch_External()</code>,&nbsp;<code>EndFrame()</code>&nbsp;iterates over each Solver calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L417" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L417" target="_self"><code>FChaosScene::SyncBodies()</code></a>.</p></div><div class="el-p"><p dir="auto">The work of&nbsp;<code>SyncBodies()</code>&nbsp;is handled by&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1714" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1714" target="_self"><code>FPhysScene_Chaos::OnSyncBodies()</code></a>, which indulges in some indirection by passing a lambda to&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PhysicsSolverBaseImpl.h#L20" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PhysicsSolverBaseImpl.h#L20" target="_self"><code>FPhysicsSolverBase::PullPhysicsStateForEachDirtyProxy_External()</code></a>. This function, with some help from&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/ChaosResultsManager.h#L56" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/ChaosResultsManager.h#L56" target="_self"><code>FChaosResultsManager</code></a>,<sup data-footnote-id="fnref-9-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-9-c2e3f4e65869e5f3"><a data-footref="[inline8" href="#fn-9-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[9]</a></sup>&nbsp;contains logic for interpolating the queue of physics results in an asynchronous setting. This is reasonably well-commented, which is good because I’m going to gloss over it. In the case where we are not interpolating, it simply takes the latest update’s&nbsp;<code>FPullPhysicsData</code>&nbsp;with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PhysicsSolverBaseImpl.h#L71" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PhysicsSolverBaseImpl.h#L71" target="_self"><code>FChaosResultsManager::PullSyncPhysicsResults()</code></a>&nbsp;and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1748" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1748" target="_self">assembles a collection</a>&nbsp;of transforms for the&nbsp;<code>UPrimitiveComponent</code>s that own the associated dirty Proxy. Finally,&nbsp;<code>OnSyncBodies()</code>&nbsp;iterates over this collection, calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2404" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2404" target="_self"><code>UPrimitiveComponent::MoveComponent()</code></a>&nbsp;on each component based on those collected transforms.</p></div><div class="el-p"><p dir="auto">And with that we’re back in familiar territory! It is reassuring that the culmination of all of the physics calculation is to manipulate our&nbsp;<code>AActor</code>s by calling a function that we as the API consumer might call ourselves. After those&nbsp;<code>MoveComponent()</code>&nbsp;calls,&nbsp;<code>UWorld::Tick()</code>&nbsp;is done with the&nbsp;<code>TG_EndPhysics</code>&nbsp;group, then executes the&nbsp;<code>TG_PostPhysics</code>&nbsp;group, and gets on with its day. Then it starts the whole process over a few milliseconds later!</p></div><div class="el-h3"><h3 data-heading="3. Querying" dir="auto" class="heading" id="3._Querying_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3. Querying</h3></div><div class="el-p"><p dir="auto">After trawling through the entire physics frame, this section should be a fairly straightforward tying of loose ends. The&nbsp;<code>UPrimitiveComponent</code>&nbsp;knowing where it is after an update suffices for a lot of what we need from the physics engine - transformation information reaches the rendering engine without any input necessary from us as the developer, and we can directly manipulate and react to the positions of our&nbsp;<code>AActor</code>s in our game logic without having to worry about the machinery we’ve spent the last 5000 or so words exploring. However, while one could approximate the results of a collision event handler or tracing with polling or something, that would be less performant for a worse result than simply tying into the calculations that are already being done by the physics engine!</p></div><div class="el-h4"><h4 data-heading="Tracing, Sweeping, Overlapping" dir="auto" class="heading" id="Tracing,_Sweeping,_Overlapping_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Tracing, Sweeping, Overlapping</h4></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162332.png" src="♣vaultstorage/attachment/pasted-image-20251130162332.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162332.png" src="♣vaultstorage/attachment/pasted-image-20251130162332.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Line tracing, also known as ray casting (but slightly less overloaded a term), refers to the concept of defining a start and end point in space, constructing a line between them, and finding which geometric objects in the scene intersect with that line. “Sweeping” refers to the same concept, but rather than checking for intersections with a mathematically pure line segment, we are checking for intersections with a volume that corresponds to a 3-dimensional shape being “swept” through space along that line segment. Like dragging a spoon across the top of a fresh carton of ice cream, rather than a needle. “Overlapping” is perhaps the most self explanatory of the three, checking if several geometric objects occupy the same space.</p></div><div class="el-p"><p dir="auto"><code>UWorld</code>, finishing off its hat-trick of being our entrypoint to the physics framework, provides our interface for traces, sweep, and overlap queries.&nbsp;<code>UWorld</code>&nbsp;contains an&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1878" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Engine/World.h#L1878" target="_self">absolute mound of functions</a>&nbsp;for sweeps, traces, and overlaps, with plenty of options for filtering the query by collision channel or object type, for getting lists of intersections or just the first, or for doing it asynchronously vs synchronously. The good news is that all of these calls, after going through several levels of templating or task manager shenanigans, end up in one of two places:&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L337" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L337" target="_self"><code>TSceneCastCommonImp()</code></a><sup data-footnote-id="fnref-10-c2e3f4e65869e5f3" class="footnote-ref" id="fnref-10-c2e3f4e65869e5f3"><a data-footref="[inline9" href="#fn-10-c2e3f4e65869e5f3" class="footnote-link" target="_self" rel="noopener nofollow">[10]</a></sup>&nbsp;for traces and sweeps, and&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L561" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L561" target="_self"><code>GeomOverlapMultiImp()</code></a>&nbsp;for overlaps.</p></div><div class="el-p"><p dir="auto">Slightly disappointingly, the bottleneck of&nbsp;<code>TSceneCastCommonImp()</code>&nbsp;branches back out through more template shenanigans to&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L179" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L179" target="_self"><code>LowLevelRaycast</code></a>&nbsp;or&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L213" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L213" target="_self"><code>LowLevelSweep</code></a>&nbsp;via&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L159" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L159" target="_self"><code>TSQTraits::SceneTrace()</code></a>, the core function called by&nbsp;<code>TSceneCastCommonImp()</code>. Meanwhile&nbsp;<code>GeomOverlapMultiImp()</code>&nbsp;calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L250" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQueryLowLevel.cpp#L250" target="_self"><code>LowLevelOverlap</code></a>. These three&nbsp;<code>LowLevel</code>&nbsp;functions are fairly similar, fetching the “spatial acceleration structure” that is&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolution.h#L981" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/PBDRigidsEvolution.h#L981" target="_self">maintained by&nbsp;<code>FPBDRigidsEvolutionGBF</code></a>, the bottom level of our physics stack as we’ve explored, and calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ISpatialAcceleration.h#L282" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ISpatialAcceleration.h#L282" target="_self"><code>Raycast()</code>,&nbsp;<code>Sweep()</code>, or&nbsp;<code>Overlap()</code></a>&nbsp;to query it.</p></div><div class="el-p"><p dir="auto">The implementation details of the spatial acceleration structure, like the details of PBD simulation, fall outside of the scope of this blog post. I hope that you will be content, as I am, in seeing the connection between our&nbsp;<code>UWorld</code>&nbsp;trace API and&nbsp;<code>FPBDRigidsEvolutionGBF</code>, the class wherein we found the physics integration calculations.</p></div><div class="el-h4"><h4 data-heading="Collision Events" dir="auto" class="heading" id="Collision_Events_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Collision Events</h4></div><div class="el-p"><p dir="auto">Whether through blueprints or the C++ API, collision events are propagated primarily via the&nbsp;<code>OnComponentHit</code>&nbsp;and&nbsp;<code>OnComponentBeginOverlap</code>&nbsp;delegates&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L184" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L184" target="_self">defined by&nbsp;<code>UPrimitiveComponent</code></a>. There are other physics-related delegates defined alongside them, but we’ll be focusing on these two, since they’re the most generally useful, and the ones that are&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.1/en-US/collision-in-unreal-engine---overview/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.1/en-US/collision-in-unreal-engine---overview/" target="_self">visible via the Details editor</a>.</p></div><div class="el-h5"><h5 data-heading="OnComponentBeginOverlap" dir="auto" class="heading" id="OnComponentBeginOverlap_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>OnComponentBeginOverlap</h5></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162440.png" src="♣vaultstorage/attachment/pasted-image-20251130162440.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162440.png" src="♣vaultstorage/attachment/pasted-image-20251130162440.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">OnComponentBeginOverlap과 OnComponentEndOverlap은 UPrimitiveComponent::UpdateOverlaps()를 통해 전파되며, 이 함수는 각각 UPrimitiveComponent::BeginComponentOverlap() 또는 UPrimitiveComponent::EndComponentOverlap()을 호출합니다. UpdateOverlaps()는 AActor::UpdateOverlaps()에서 호출될 수 있으며, 주로 레벨 로딩이나 충돌 관련 상태가 런타임에 변경되는 경우와 같이<code>OnComponentBeginOverlap</code>&nbsp;and&nbsp;<code>OnComponentEndOverlap</code>&nbsp;get broadcast by&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3486" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3486" target="_self"><code>UPrimitiveComponent::UpdateOverlaps()</code></a>&nbsp;calling&nbsp;<code>UPrimitiveComponent::BeginComponentOverlap()</code>&nbsp;or&nbsp;<code>UPrimitiveComponent::EndComponentOverlap()</code>&nbsp;respectively.&nbsp;<code>UpdateOverlaps()</code>&nbsp;can be called from&nbsp;<code>AActor::UpdateOverlaps()</code>, primarily by edge cases such as on level load or if the&nbsp;<code>AActor</code>’s collision-relevant state is changed at runtime - situations that would call for immediate refreshing of overlap events. The more general and frequent case where&nbsp;<code>UPrimitiveComponent::UpdateOverlap()</code>&nbsp;is called is toward the end of&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2650" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2650" target="_self"><code>UPrimitiveComponent::MoveComponent()</code></a>, the same function that is called at the end of our physics frame to reflect the simulation step.</p></div><div class="el-p"><p dir="auto">The most significant question in the scope of this blog post is how we assemble the list of components that we’re calling&nbsp;<code>BeginComponentOverlap()</code>&nbsp;on.&nbsp;<code>UpdateOverlaps()</code>&nbsp;takes a list of pending overlaps as a parameter. If it’s executed from&nbsp;<code>AActor::UpdateOverlaps()</code>, this will be null. It will only be non-null if it’s executed from&nbsp;<code>MoveComponent()</code>&nbsp;with the&nbsp;<code>bSweep</code>&nbsp;parameter set to true, for instance such as when calling&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/GameFramework/AActor/SetActorLocation/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/GameFramework/AActor/SetActorLocation/" target="_self"><code>AActor::SetActorLocation()</code></a>. In this case it does a sweep query and uses the results as the pending overlaps. Most frequently though&nbsp;<code>bSweep</code>&nbsp;will be false, particularly when&nbsp;<code>MoveComponent()</code>&nbsp;is called by&nbsp;<code>FPhysScene_Chaos::OnSyncBodies()</code>.</p></div><div class="el-p"><p dir="auto">All of these pending overlaps are iterated over in&nbsp;<code>UPrimitiveComponent::UpdateOverlaps()</code>, broadcasting&nbsp;<code>OnComponentBeginOverlap</code>&nbsp;events. After that, whether there were pending overlaps or not,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3555" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3555" target="_self">it calls</a>&nbsp;<code>UPrimitiveComponent::ComponentOverlapMulti()</code>&nbsp;on itself, which ends up at the same&nbsp;<code>LowLevelOverlap</code>&nbsp;that we saw in the trace/sweep section.&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3590" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L3590" target="_self">Some work is done</a>&nbsp;comparing the results of that overlap query, the overlaps that were passed in, and a list of overlapping components frame the previous frame to determine which components still need to trigger&nbsp;<code>OnComponentBeginOverlap</code>, and which components now need to trigger&nbsp;<code>OnComponentEndOverlap</code>.</p></div><div class="el-p"><p dir="auto">That’s all there is to it! Whether via physics simulation or manual movement, the primitive components manage overlap event handling via the&nbsp;<code>UpdateOverlaps()</code>&nbsp;function.</p></div><div class="el-h5"><h5 data-heading="OnComponentHit" dir="auto" class="heading" id="OnComponentHit_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>OnComponentHit</h5></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20251130162454.png" src="♣vaultstorage/attachment/pasted-image-20251130162454.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20251130162454.png" src="♣vaultstorage/attachment/pasted-image-20251130162454.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">While&nbsp;<code>OnComponentHit</code>&nbsp;is defined in and pertains specifically to&nbsp;<code>UPrimitiveComponent</code>, it is in fact only ever Broadcast by&nbsp;<code>AActor</code>&nbsp;member functions. Obnoxiously, there are two nearly identical functions in&nbsp;<code>AActor</code>&nbsp;that dispatch hit events, used in different contexts:&nbsp;<code>DispatchPhysicsCollisionHit()</code>&nbsp;and&nbsp;<code>DispatchBlockingHit()</code>. In both cases, it calls&nbsp;<code>NotifyHit()</code>&nbsp;(which calls the&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.1/en-US/function-specifiers/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.1/en-US/function-specifiers/" target="_self">BlueprintImplementableEvent</a>&nbsp;<code>ReceiveHit</code>), then broadcasts the&nbsp;<code>AActor::OnActorHit()</code>&nbsp;and&nbsp;<code>UPrimitiveComponent::OnComponentHit()</code>&nbsp;events.</p></div><div class="el-h6"><h6 data-heading="DispatchPhysicsCollisionHit" dir="auto" class="heading" id="DispatchPhysicsCollisionHit_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>DispatchPhysicsCollisionHit</h6></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Actor.cpp#L4914" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Actor.cpp#L4914" target="_self"><code>AActor::DispatchPhysicsCollisionHit()</code></a>&nbsp;is the most frequent path that broadcasts the component hit event. It is executed by<code>FPhysScene_Chaos::HandleCollisionEvents()</code>, which is an event that is dispatched in&nbsp;<code>FChaosScene::EndFrame()</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L521" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/PhysicsCore/Private/ChaosScene.cpp#L521" target="_self">immediately after</a>&nbsp;<code>SyncBodies()</code>&nbsp;is called.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L748" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L748" target="_self"><code>FPhysScene_Chaos::HandleCollisionEvents()</code></a>&nbsp;consumes&nbsp;<code>FCollisionEventData</code>&nbsp;events, which are generated by&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/EventDefaults.cpp#L73" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/EventDefaults.cpp#L73" target="_self"><code>FEventDefaults::RegisterCollisionEvent()</code></a>. We did not and will continue to not look closely at&nbsp;<code>FEventManager</code>&nbsp;or&nbsp;<code>FEventDefaults</code>, except to see that&nbsp;<code>RegisterCollisionEvent()</code>&nbsp;is executed when&nbsp;<code>AdvanceOneTimeStepTask::DoWork()</code>&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L427" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidsSolver.cpp#L427" target="_self">calls</a>&nbsp;<code>FEventManager::FillProducerData()</code>&nbsp;shortly after calling&nbsp;<code>FPBDRigidsEvolutionGBF::AdvanceOneTimeStep()</code>. The particulars of how the collisions are detected dives headfirst into&nbsp;<code>FPBDRigidsEvolutionGBF</code>’s inner workings, so we will not be covering them. Suffice to say that the collisions are accumulated almost immediately after the simulation step is completed, and then are propagated while ending the physics frame.</p></div><div class="el-p"><p dir="auto">Something that is worth covering, however, is the work that&nbsp;<code>FPhysScene_Chaos</code>&nbsp;does to manage these collision events. It only compiles collision events if they are being listened for, which it manages with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L527" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L527" target="_self"><code>FPhysScene_Chaos::RegisterForCollisionEvents()</code></a>. This is called by&nbsp;<code>FInitBodiesHelperBase::InitBodies()</code>,&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1431" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/BodyInstance.cpp#L1431" target="_self">right after</a>&nbsp;<code>FChaosScene::AddActorsToScene_AssumesLocked()</code>! It is also called, naturally, if we start or stop listening to collision events at runtime, such as with&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PrimitiveComponentPhysics.cpp#L529" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PrimitiveComponentPhysics.cpp#L529" target="_self"><code>UPrimitiveComponent::SetNotifyRigidBodyCollision()</code></a>.</p></div><div class="el-h6"><h6 data-heading="DispatchBlockingHit" dir="auto" class="heading" id="DispatchBlockingHit_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>DispatchBlockingHit</h6></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Actor.cpp#L2904" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Actor.cpp#L2904" target="_self"><code>AActor::DispatchBlockingHit()</code></a>&nbsp;is a more “general purpose” way to dispatch a hit event on an&nbsp;<code>AActor</code>&nbsp;than&nbsp;<code>DispatchPhysicsCollisionHit</code>. Its signature is notably different from that of&nbsp;<code>DispatchPhysicsCollisionHit()</code>: while that function takes physics-specific structs&nbsp;<code>FRigidBodyCollisionInfo</code>&nbsp;and&nbsp;<code>FCollisionImpactData</code>&nbsp;and uses those to determine the&nbsp;<code>UPrimitiveComponent</code>s and the&nbsp;<code>FHitResult</code>&nbsp;arguments for the event,&nbsp;<code>DispatchBlockingHit()</code>&nbsp;directly takes pointers to&nbsp;<code>UPrimitiveComponent</code>s and passes a provided&nbsp;<code>FHitResult</code>&nbsp;without modification. This makes it the natural choice if you wanted to manually dispatch a hit event on an&nbsp;<code>AActor</code>. Other than that, it is used for&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Components/FScopedMovementUpdate/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/Components/FScopedMovementUpdate/" target="_self">“scoped movement”</a>&nbsp;or if&nbsp;<code>UPrimitiveComponent::MoveComponent()</code>&nbsp;is called with the&nbsp;<code>bSweep</code>&nbsp;parameter set to&nbsp;<code>true</code>&nbsp;and a&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2694" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Components/PrimitiveComponent.cpp#L2694" target="_self">blocking collision occurs</a>, such as when calling&nbsp;<a data-tooltip-position="top" aria-label="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/GameFramework/AActor/SetActorLocation/" rel="noopener nofollow" class="external-link is-unresolved" href="https://docs.unrealengine.com/5.0/en-US/API/Runtime/Engine/GameFramework/AActor/SetActorLocation/" target="_self"><code>AActor::SetActorLocation()</code></a>, just like we saw for overlaps.</p></div><div class="el-p"><p dir="auto">And that about does it for querying. While it’s not as all-encompassing as actor representations or simulation ticks, it did find its way into some familiar locales!</p></div><div class="el-h2"><h2 data-heading="Conclusion" dir="auto" class="heading" id="Conclusion_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Conclusion</h2></div><div class="el-p"><p dir="auto">And that is all about all I have to say about the physics framework! We got an idea for how the physics engine conceptualizes of our actors, we dug down in the tick functions until we found actual physics-related math, and we figured out how that physics-related math bubbles back up into the engine. I sincerely hope that this blog post is helpful in some way, or at the very least helps you know where to stick a breakpoint for your own investigation. This was a hell of an undertaking for me. It is incredible how much time I spent on this, and I still feel like I only scratched the surface. Unreal is truly an enormous codebase, and you can really only get an idea of its size by nearly choking on too big a bite of it. Nevertheless I think this was a worthwhile exercise, I learned quite a bit about C++ without the kid gloves of Unreal’s API, and I feel much more empowered to spelunk in the engine’s depths. And if you got anything out of it as well then it was doubly worthwhile.</p></div><div class="el-p"><p dir="auto">Special thanks to&nbsp;<a data-tooltip-position="top" aria-label="https://glowcoil.com/" rel="noopener nofollow" class="external-link is-unresolved" href="https://glowcoil.com/" target="_self">Micah Johnston</a>&nbsp;for proofreading and emotional support.</p></div><div>
</div><div class="el-section"><section class="footnotes"><hr><ol>
<li data-line="-277" data-footnote-id="fn-1-c2e3f4e65869e5f3" id="fn-1-c2e3f4e65869e5f3" dir="auto">You may notice directly under&nbsp;<code>PhysicsScene</code>&nbsp;that there are two more pointers to&nbsp;<code>FPhysScene_Chaos</code>&nbsp;objects. These are never used in practice, and are likely a holdover from the PhysX to Chaos migration.<a href="#fnref-1-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-225" data-footnote-id="fn-2-c2e3f4e65869e5f3" id="fn-2-c2e3f4e65869e5f3" dir="auto">This isn’t quite true, for instance&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/PhysicsConstraintComponent.h#L19" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/PhysicsConstraintComponent.h#L19" target="_self">Physics Constraint Components</a>&nbsp;do not inherit from&nbsp;<code>UPrimitiveComponent</code>&nbsp;(although they do interact with them!), but it is true enough for our exploration.<a href="#fnref-2-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-187" data-footnote-id="fn-3-c2e3f4e65869e5f3" id="fn-3-c2e3f4e65869e5f3" dir="auto">Pedantically, the engine&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameInstance.cpp#L188" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/GameInstance.cpp#L188" target="_self">loads a dummy world</a>&nbsp;during start up before the real map is loaded.<a href="#fnref-3-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-150" data-footnote-id="fn-4-c2e3f4e65869e5f3" id="fn-4-c2e3f4e65869e5f3" dir="auto">Chaos&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/ShapeElem.h#L15" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/PhysicsEngine/ShapeElem.h#L15" target="_self">has four</a>&nbsp;“primitive” types of shapes: Sphere, Box, “Sphylinder” (capsule), and “Tapered Capsule”. Unreal 5.1.0 added a new type, a&nbsp;<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Level_set" rel="noopener nofollow" class="external-link is-unresolved" href="https://en.wikipedia.org/wiki/Level_set" target="_self">Level Set</a>&nbsp;- we will not be looking at these. Everything else is a “Convex Shape”.&nbsp;<a data-tooltip-position="top" aria-label="http://www.codercorner.com/blog/?p=1303" rel="noopener nofollow" class="external-link is-unresolved" href="http://www.codercorner.com/blog/?p=1303" target="_self">This</a>&nbsp;is a very interesting blog post by a PhysX developer on why they did not add a “Cylinder” shape to PhysX, which is likely why Chaos does not have it either!<a href="#fnref-4-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-115" data-footnote-id="fn-5-c2e3f4e65869e5f3" id="fn-5-c2e3f4e65869e5f3" dir="auto">It also calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1441" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/PhysicsEngine/Experimental/PhysScene_Chaos.cpp#L1441" target="_self"><code>FPhysScene_Chaos::UpdateKinematicsOnDeferredSkelMeshes()</code></a>&nbsp;here, which seems pretty important for skeletal physics but is out of my scope.<a href="#fnref-5-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-91" data-footnote-id="fn-6-c2e3f4e65869e5f3" id="fn-6-c2e3f4e65869e5f3" dir="auto">Another example of an interaction might be calling&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L1375" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Classes/Components/PrimitiveComponent.h#L1375" target="_self"><code>AddImpulse()</code></a>&nbsp;on a primitive component. This takes a different path (winding through&nbsp;<code>FPhysScene_Chaos</code>&nbsp;and&nbsp;<code>FBodyInstance</code>) but reaches a&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2675" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/ParticleHandle.h#L2675" target="_self">similar place</a>&nbsp;to our direct movement example, culminating in&nbsp;<code>AddDirtyProxy()</code>&nbsp;being called the same way.<a href="#fnref-6-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-87" data-footnote-id="fn-7-c2e3f4e65869e5f3" id="fn-7-c2e3f4e65869e5f3" dir="auto">The “Property” that is dirty is a separate object than the “Proxy” that is added to&nbsp;<code>FPushPhysicsData</code>’s dirty buffer, but it is marked dirty&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Properties.h#L74" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Properties.h#L74" target="_self">in the same place</a>&nbsp;as the proxy when we’re updating an actor like in the player movement case. Naturally, we’re not dirtying a property when we register the actor for the first time in the spawning case, so we can have a dirty proxy without having a dirty property, but not the other way around.<a href="#fnref-7-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-69" data-footnote-id="fn-8-c2e3f4e65869e5f3" id="fn-8-c2e3f4e65869e5f3" dir="auto">First&nbsp;<code>CompleteSceneSimulation()</code>&nbsp;calls&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidActiveParticlesBuffer.cpp#L26" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Private/PBDRigidActiveParticlesBuffer.cpp#L26" target="_self"><code>FPBDRigidDirtyParticlesBuffer::BufferPhysicsResults()</code></a>&nbsp;(distinct from&nbsp;<code>FPBDRigidsSolver</code>’s&nbsp;<code>BufferPhysicsResults()</code>), which assembles the particles into&nbsp;<code>FPBDRigidDirtyParticlesBufferOut-&gt;DirtyGameThreadParticles</code>, an array of&nbsp;<code>FSingleParticlePhysicsProxy</code>&nbsp;objects. However, I can’t find where this is ever used.<a href="#fnref-8-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-61" data-footnote-id="fn-9-c2e3f4e65869e5f3" id="fn-9-c2e3f4e65869e5f3" dir="auto"><code>FChaosResultsManager</code>&nbsp;is a helper class&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/PhysicsSolverBase.h#L603" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Experimental/Chaos/Public/Chaos/Framework/PhysicsSolverBase.h#L603" target="_self">owned by&nbsp;<code>FPBDPhysicsSolver</code></a>&nbsp;which manipulates pull data from&nbsp;<code>FChaosMarshallingManager</code>&nbsp;for this step.<a href="#fnref-9-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
<li data-line="-47" data-footnote-id="fn-10-c2e3f4e65869e5f3" id="fn-10-c2e3f4e65869e5f3" dir="auto">One item of note in&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L436" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/EpicGames/UnrealEngine/blob/5.1.0-release/Engine/Source/Runtime/Engine/Private/Collision/SceneQuery.cpp#L436" target="_self"><code>TSceneCastCommon()</code></a>&nbsp;is a conditional selecting between templated functions based on whether the thread context is the Game thread or the Physics thread. The two paths are identical except for whether&nbsp;<code>Traits</code>&nbsp;or&nbsp;<code>PTTraits</code>&nbsp;is used for the&nbsp;<code>Traits</code>&nbsp;template parameter, although what that difference&nbsp;<em>means</em>&nbsp;is not something I investigated.<a href="#fnref-10-c2e3f4e65869e5f3" class="footnote-backref footnote-link" target="_self" rel="noopener nofollow">↩︎</a></li>
</ol></section></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#(번역중..)_Exploring_Unreal's_Physics_Framework_0" data-path="#(번역중..)_Exploring_Unreal's_Physics_Framework_0"><div class="tree-item-inner heading-link" heading-name="(번역중..) Exploring Unreal's Physics Framework">(번역중..) Exploring Unreal's Physics Framework</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#머리말_0" data-path="#머리말_0"><div class="tree-item-inner heading-link" heading-name="머리말">머리말</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#소개_0" data-path="#소개_0"><div class="tree-item-inner heading-link" heading-name="소개">소개</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#주요_클래스_0" data-path="#주요_클래스_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="주요 클래스">주요 클래스</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#The_World_0" data-path="#The_World_0"><div class="tree-item-inner heading-link" heading-name="The World">The World</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#The_Grand_Stage_0" data-path="#The_Grand_Stage_0"><div class="tree-item-inner heading-link" heading-name="The Grand Stage">The Grand Stage</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPhysScene_Chaos_0" data-path="#FPhysScene_Chaos_0"><div class="tree-item-inner heading-link" heading-name="FPhysScene_Chaos">FPhysScene_Chaos</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPhysInterface_Chaos_0" data-path="#FPhysInterface_Chaos_0"><div class="tree-item-inner heading-link" heading-name="FPhysInterface_Chaos">FPhysInterface_Chaos</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPBDRigidsSolver_0" data-path="#FPBDRigidsSolver_0"><div class="tree-item-inner heading-link" heading-name="FPBDRigidsSolver">FPBDRigidsSolver</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPBDRigidsSOAs_0" data-path="#FPBDRigidsSOAs_0"><div class="tree-item-inner heading-link" heading-name="FPBDRigidsSOAs">FPBDRigidsSOAs</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FChaosMarshallingManager_0" data-path="#FChaosMarshallingManager_0"><div class="tree-item-inner heading-link" heading-name="FChaosMarshallingManager">FChaosMarshallingManager</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPBDRigidsEvolutionGBF_0" data-path="#FPBDRigidsEvolutionGBF_0"><div class="tree-item-inner heading-link" heading-name="FPBDRigidsEvolutionGBF">FPBDRigidsEvolutionGBF</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Dramatis_Personae_0" data-path="#Dramatis_Personae_0"><div class="tree-item-inner heading-link" heading-name="Dramatis Personae">Dramatis Personae</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#AActor_0" data-path="#AActor_0"><div class="tree-item-inner heading-link" heading-name="AActor">AActor</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#UPrimitiveComponent_0" data-path="#UPrimitiveComponent_0"><div class="tree-item-inner heading-link" heading-name="UPrimitiveComponent">UPrimitiveComponent</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FBodyInstance_0" data-path="#FBodyInstance_0"><div class="tree-item-inner heading-link" heading-name="FBodyInstance">FBodyInstance</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FSingleParticlePhysicsProxy_0" data-path="#FSingleParticlePhysicsProxy_0"><div class="tree-item-inner heading-link" heading-name="FSingleParticlePhysicsProxy">FSingleParticlePhysicsProxy</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#API_Interactions_0" data-path="#API_Interactions_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="API Interactions">API Interactions</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#0._Engine_Initialization_0" data-path="#0._Engine_Initialization_0"><div class="tree-item-inner heading-link" heading-name="0. Engine Initialization">0. Engine Initialization</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#1._Actor_Registration_0" data-path="#1._Actor_Registration_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="1. Actor Registration">1. Actor Registration</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#AActor_Initialization_0" data-path="#AActor_Initialization_0"><div class="tree-item-inner heading-link" heading-name="AActor Initialization">AActor Initialization</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="4"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FBodyInstance_Initialization_0" data-path="#FBodyInstance_Initialization_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="FBodyInstance Initialization">FBodyInstance Initialization</div></a><div class="tree-item-children"><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FBodyInstance’s_Lackeys_0" data-path="#FBodyInstance’s_Lackeys_0"><div class="tree-item-inner heading-link" heading-name="FBodyInstance’s Lackeys">FBodyInstance’s Lackeys</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Regarding_“Actors”_and_“Shapes”_0" data-path="#Regarding_“Actors”_and_“Shapes”_0"><div class="tree-item-inner heading-link" heading-name="Regarding “Actors” and “Shapes”">Regarding “Actors” and “Shapes”</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#CreateShapesAndActors_0" data-path="#CreateShapesAndActors_0"><div class="tree-item-inner heading-link" heading-name="CreateShapesAndActors">CreateShapesAndActors</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#The_Rest_of_InitBodies_0" data-path="#The_Rest_of_InitBodies_0"><div class="tree-item-inner heading-link" heading-name="The Rest of InitBodies">The Rest of InitBodies</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Actor_Destruction_0" data-path="#Actor_Destruction_0"><div class="tree-item-inner heading-link" heading-name="Actor Destruction">Actor Destruction</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#2._Scene_Tick_0" data-path="#2._Scene_Tick_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="2. Scene Tick">2. Scene Tick</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#The_Physics_Frame_0" data-path="#The_Physics_Frame_0"><div class="tree-item-inner heading-link" heading-name="The Physics Frame">The Physics Frame</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="4"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Push_and_Pull_Moving_Data_0" data-path="#Push_and_Pull_Moving_Data_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Push and Pull: Moving Data">Push and Pull: Moving Data</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="5"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPushPhysicsData_0" data-path="#FPushPhysicsData_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="FPushPhysicsData">FPushPhysicsData</div></a><div class="tree-item-children"><div class="tree-item" data-depth="6"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#PushPhysicsState_0" data-path="#PushPhysicsState_0"><div class="tree-item-inner heading-link" heading-name="PushPhysicsState">PushPhysicsState</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#ProcessPushData_0" data-path="#ProcessPushData_0"><div class="tree-item-inner heading-link" heading-name="ProcessPushData">ProcessPushData</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#FPullPhysicsData_0" data-path="#FPullPhysicsData_0"><div class="tree-item-inner heading-link" heading-name="FPullPhysicsData">FPullPhysicsData</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#3._Querying_0" data-path="#3._Querying_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="3. Querying">3. Querying</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Tracing,_Sweeping,_Overlapping_0" data-path="#Tracing,_Sweeping,_Overlapping_0"><div class="tree-item-inner heading-link" heading-name="Tracing, Sweeping, Overlapping">Tracing, Sweeping, Overlapping</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="4"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Collision_Events_0" data-path="#Collision_Events_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Collision Events">Collision Events</div></a><div class="tree-item-children"><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#OnComponentBeginOverlap_0" data-path="#OnComponentBeginOverlap_0"><div class="tree-item-inner heading-link" heading-name="OnComponentBeginOverlap">OnComponentBeginOverlap</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="5"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#OnComponentHit_0" data-path="#OnComponentHit_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="OnComponentHit">OnComponentHit</div></a><div class="tree-item-children"><div class="tree-item" data-depth="6"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#DispatchPhysicsCollisionHit_0" data-path="#DispatchPhysicsCollisionHit_0"><div class="tree-item-inner heading-link" heading-name="DispatchPhysicsCollisionHit">DispatchPhysicsCollisionHit</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#DispatchBlockingHit_0" data-path="#DispatchBlockingHit_0"><div class="tree-item-inner heading-link" heading-name="DispatchBlockingHit">DispatchBlockingHit</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="0-발행완료/언리얼-엔진/엔진-해부하기/(번역중..)-exploring-unreal's-physics-framework.html#Conclusion_0" data-path="#Conclusion_0"><div class="tree-item-inner heading-link" heading-name="Conclusion">Conclusion</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>