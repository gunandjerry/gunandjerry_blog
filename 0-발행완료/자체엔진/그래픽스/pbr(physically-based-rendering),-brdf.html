<!DOCTYPE html> <html lang="ko"><head>
<title>PBR(Physically-Based Rendering), BRDF</title>
<base href="../../..">
<meta name="pathname" content="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html">
<meta name="description" content="건제리의 블로그 - PBR(Physically-Based Rendering), BRDF">
<meta property="og:title" content="PBR(Physically-Based Rendering), BRDF">
<meta property="og:description" content="건제리의 블로그 - PBR(Physically-Based Rendering), BRDF">
<meta property="og:type" content="website">
<meta property="og:url" content="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html">
<meta property="og:image" content="♣vaultstorage/attachment/pasted-image-20250925163936.png">
<meta charset="UTF-8"><meta property="og:site_name" content="건제리의 블로그"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager is-frameless is-hidden-frameless styled-scrollbars show-inline-title show-ribbon ctp-latte ctp-mocha ctp-accent-sapphire anuppuccin-accent-toggle anp-callout-sleek anp-codeblock-numbers anp-list-toggle anp-table-toggle anp-table-th-highlight anp-h1-red anp-h2-peach anp-h3-green anp-h4-teal anp-h5-lavender anp-h6-mauve anp-decoration-toggle anp-bold-red anp-italic-maroon anp-highlight-yellow anp-file-icons anp-collapse-folders anp-simple-rainbow-color-toggle anp-rainbow-file-toggle anp-simple-rainbow-title-toggle anp-simple-rainbow-collapse-icon-toggle anp-simple-rainbow-indentation-toggle anp-default-tab anp-card-layout is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event allow-fold-headings allow-fold-lists show-indentation-guide show-properties is-readable-line-width" data-type="markdown"><style id="MJX-CHTML-styles">mjx-msub{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D439.TEX-I::before{padding:.68em .749em 0 0;content:"F"}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c22C5::before{padding:.31em .278em 0 0;content:"⋅"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c1D70B.TEX-I::before{padding:.431em .57em .011em 0;content:"π"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c1D43E.TEX-I::before{padding:.683em .889em 0 0;content:"K"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c38::before{padding:.666em .5em .022em 0;content:"8"}mjx-c.mjx-c1D43C.TEX-I::before{padding:.683em .504em 0 0;content:"I"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D440.TEX-I::before{padding:.683em 1.051em 0 0;content:"M"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D43F.TEX-I::before{padding:.683em .681em 0 0;content:"L"}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D44A.TEX-I::before{padding:.683em 1.048em .022em 0;content:"W"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="PBR(Physically-Based_Rendering),_BRDF_0">PBR(Physically-Based Rendering), BRDF</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">Physically Based Rendering, 물리 기반 렌더링.<br>
또는 Physically Based Shading, 물리 기반 셰이딩이라고도 한다.</p></div><div class="el-h1"><h1 data-heading="PBR이란" dir="auto" class="heading" id="PBR이란_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>PBR이란</h1></div><div class="el-p"><p dir="auto">기본적으로 모든 재질은 고유한 색을 가진다. 그리고 현실에서는 극히 제한적인 경우를 제외하면 빛에 의한 난반사(Diffuse)와 정반사(Specular)라는 현상이 일어난다. 난반사는 거친 면에 빛이 닿아 사방팔방으로 흩뿌려지듯 반사되는 것이고, 정반사는 매끄러운 면에 입사각과 반사각을 형성하며 반사되는 것을 말한다.</p></div><div class="el-p"><p dir="auto">보통 정반사가 일어나는 표면은 빛이 강하게 반사되어 입사광의 색상을 띄는 것처럼 보이는데, 금속(Metallic)의 경우엔 그렇지 않고 기본 색을 유지하는 특성이 있다.</p></div><div class="el-p"><p dir="auto">또 물체의 거칠기(Roughness)에 따라 정반사와 난반사의 비율이 변하는데, 표면이 거칠 수록 난반사의 비율이, 매끄러울 수록 정반사의 비율이 커진다.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">레거시 라이팅과 PBR의 Diffuse</div></div><div class="callout-content">
<p dir="auto">레거시 라이팅은 Diffuse(확산광)에 의한 난반사가 존재한다는 믿음에 근거한 모델이다. 표면이 어떻든 빛의 확산이 일어난다는 것이다. 하지만 이는 물리적으로 틀렸다. 난반사는 투과된 빛이 입자와 부딪혀 여기저기 반사된 빛으로, 표면의 재질에 따라 전혀 다른 양상으로 나타난다. 예컨대 금속 물질은 그 성질 때문에 난반사가 일어나지 않는다.<br>
PBR은 이런 물리적 성질을 계산해서(엄밀하진 않지만, 보다 사실에 가깝게) 구현하는 렌더링이다.</p>
</div></div></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="사전 지식" dir="auto" class="heading" id="사전_지식_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>사전 지식</h1></div><div class="el-h2"><h2 data-heading="빛의 성질" dir="auto" class="heading" id="빛의_성질_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>빛의 성질</h2></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925163936.png" src="♣vaultstorage/attachment/pasted-image-20250925163936.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 375px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20250925163936.png" src="♣vaultstorage/attachment/pasted-image-20250925163936.png" target="_self" style="width: 375px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">빛이 물체의 표면에 맞닥뜨렸을 때, 다음의 다섯 가지 현상이 일어난다.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">굴절 : 빛이 다른 매질로 전파될 때, 매질의 밀도가 변해 빛의 방향이 꺾이는 현상</li>
<li data-line="1" dir="auto">투과 : 빛이 물체를 통과하는 현상.</li>
<li data-line="2" dir="auto">흡수 : 빛 에너지가 원자에 닿았을 때, 원자의 전자는 특정한 파장의 에너지를 받으면 그 에너지를 흡수하여 들뜬 상태가 되었다가 다시 방출하며 본래의 상태(안전 준위)로 되돌아간다. 이 과정에서 빛이 이루는 파장의 범위에서 알맞은 영역이 전자에 의해 흡수되는 현상. 금속에선 거의 일어나지 않는다.</li>
<li data-line="3" dir="auto">반사 : 빛 파장이 가로막혀 반대 방향으로 튕겨나가는 현상. 매끄러운 표면이면 거의 입사각에 대응하는 반사각 방향으로 반사되는 정반사 현상이, 울퉁불퉁한 표면이면 이리저리 튕겨 흩뿌려지듯이 반사되는 난반사 현상이 강해진다.</li>
<li data-line="4" dir="auto">산란 : 빛이 물질의 입자들과 상호작용하여 경로가 무작위로 바껴 퍼지는 현상.</li>
</ol></div><div class="el-p"><p dir="auto">일반적으로 컴퓨터 그래픽스에선 반사와 산란이 핵심이다. 레거시 렌더링에선 표면의 법선 벡터와 입사광의 각을 내적하여 표면의 밝기를 결정하고, 정반사된 광원을 표현하는 Specular Highlight를 그리고, 난반사와 산란을 합쳐서 Diffuse Texture라는 빛에 의해 반사된 색으로 표현한다.</p></div><div class="el-h2"><h2 data-heading="금속의 성질" dir="auto" class="heading" id="금속의_성질_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>금속의 성질</h2></div><div class="el-p"><p dir="auto">금속은 자유롭게 움직이는 자유 전자를 가진다. 이 자유전자들은 빛의 전자기파와 닿으면 에너지를 흡수하고 진동하는데, 이 진동은 다시 전자기파로 변환되어 금속의 표면에서 반사된다.</p></div><div class="el-p"><p dir="auto">따라서 금속의 원색(즉, 전자들의 준위 레벨) 범위에 해당하는 파장은 흡수되고(열 에너지로 전환) 나머지 전자기파는 거의 전부 진동을 거쳐 반사되는 성질을 띈다. 금속이 반짝거리는 이유가 이 때문이다.</p></div><div class="el-p"><p dir="auto">물론 굴절, 투과, 산란이 일어나지 않는다는 말은 아니다. 금속의 성질에 따라, 두께 등에 따라 관찰될 수 있다. 그 정도가 아주 작을 뿐이다. 빛이 금속 내부에 들어가면 자유전자들에 의해 매우 빠르게 감쇠되고, 일반적으로 금속은 불투명해 투과가 일어나지 않으며, 금속의 표면이 매끄럽다면 산란도 거의 일어나지 않는다.</p></div><div class="el-h2"><h2 data-heading="프레넬 효과" dir="auto" class="heading" id="프레넬_효과_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>프레넬 효과</h2></div><div class="el-p"><p dir="auto">빛이 물체와 충돌하면 일부는 반사되고, 나머지는 투과 또는 흡수된다. 재질마다 기본적으로 이 비율이 정해져 있지만, 사실 빛의 방향도 그 비율에 영향을 준다. 프레넬 효과는 빛의 입사각이 물체의 표면과 수직에 가까울 수록 투과하는 비율이 높아지고, 수평과 가까울 수록 반사되는 비율이 높아지는 현상을 말한다.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/6b833fa8-93f2-4b28-907b-46d5f1d4213a.gif" src="♣vaultstorage/attachment/6b833fa8-93f2-4b28-907b-46d5f1d4213a.gif" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 330px; max-width: 100%;"><img alt="♣VaultStorage/attachment/6b833fa8-93f2-4b28-907b-46d5f1d4213a.gif" src="♣vaultstorage/attachment/6b833fa8-93f2-4b28-907b-46d5f1d4213a.gif" target="_self" style="width: 330px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">위 움짤을 보면 쉽게 이해할 수 있다. 표면에 수직인 빛은 거의 투과되지만, 수평에 가까워질 수록 투과되는 비율은 줄고 반사되는 비율은 늘어난다.</p></div><div class="el-p"><p dir="auto">이유는 대충 표면과 수평에 가까워질 수록 경계면에서 빛의 전자기파 성분 중 수직 성분(수직 편광)이 감소하고, 그에 따라 반사되는 양이 늘어나는 건데, 몰라도 된다.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164017.png" src="♣vaultstorage/attachment/pasted-image-20250925164017.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20250925164017.png" src="♣vaultstorage/attachment/pasted-image-20250925164017.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">프레넬 효과를 잘 설명하는 예시는 맑은 물가에 서서 아래를 보는 경우와 앞을 보는 경우다.</p></div><div class="el-p"><p dir="auto">먼저 바로 아래를 보는 경우, 어딘가에서 출발해 어딘가에 반사되어 내 눈에 도달한 빛들의 경로는 대충 아래 그림과 같을 것이다. (이는 예시일 뿐, 실제로는 주변 환경, 심지어 하늘의 구름과 대기마저도 빛을 반사하고 산란시키는 매개가 되므로, 빛은 전방위에서 출발해 전방위로 흩뿌려진다고 생각해야 한다.)</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164021.png" src="♣vaultstorage/attachment/pasted-image-20250925164021.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 300px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20250925164021.png" src="♣vaultstorage/attachment/pasted-image-20250925164021.png" target="_self" style="width: 300px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">여기서 빨간 경로는 바로 반사되어 온 빛, 파란 경로는 물에 굴절되어 바닥에 반사되어 온 빛이다. 각도를 보면 표면의 수직에 가깝기 때문에 물 표면에 반사되는 빛의 양보다 물을 투과하여 바닥에 반사된 빛의 양이 많고, 따라서 물 속을 투명하게 볼 수 있다.</p></div><div class="el-p"><p dir="auto">이번엔 더 앞을 바라보자. 이 때 내 눈에 들어오는 빛의 경로는 대충 다음과 같다.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164027.png" src="♣vaultstorage/attachment/pasted-image-20250925164027.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 300px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20250925164027.png" src="♣vaultstorage/attachment/pasted-image-20250925164027.png" target="_self" style="width: 300px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">이 때는 물의 표면에 바로 반사되는 빛의 양이 물을 투과했다 온 빛보다 많아지므로, 주변 환경이 물에 비친 모습을 볼 수 있을 뿐 물 속을 볼 수는 없다.</p></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="BSDF" dir="auto" class="heading" id="BSDF_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>BSDF</h1></div><div class="el-p"><p dir="auto">Bidirectional Scattering Distribution Function, 양방향 산란 분포 함수.</p></div><div class="el-p"><p dir="auto">빛의 매질이 변할 때 경계면에서 표면의 특성에 따라 빛이 어떻게 굴절, 투과, 흡수, 반사, 산란되는지 설명하는 수학적 함수들을 통칭하는 용어.</p></div><div class="el-p"><p dir="auto">하위 분류로 여러 종류가 있다. 그 중에서 컴퓨터 그래픽스에서 PBR을 구현할 땐 BRDF라는 걸 사용한다.</p></div><div class="el-p"><p dir="auto">BRDF(Bidirectional Reflection Distribution Function, 양방향 반사율 분포 함수)는 투과가 일어나지 않는 불투명한 표면의 한 지점에 빛이 닿고, 반사되고, 산란되는 현상까지 다루는 함수들의 집합이다. 일반적으로 컴퓨터 그래픽 렌더링의 핵심은 픽셀 단위의 연산과 빛의 반사·산란이기 때문에 이걸 사용한다.</p></div><div class="el-p"><p dir="auto">그러나 최근에는 컴퓨터 하드웨어 성능이 발전하고 여러 그래픽 기법들이 등장함에 따라 투과까지 계산하는 BTDF, 거기에 다른 지점에서 오는 빛의 영향까지 모두 다루는 BSSRDF 등 다른 종류를 사용하기도 한다. 대표적으로 빛의 자연스러운 굴절, 투과까지 표현해 피부의 질감을 묘사하는 등.</p></div><div class="el-h3"><h3 data-heading="BSDF가 준수해야 하는 것" dir="auto" class="heading" id="BSDF가_준수해야_하는_것_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>BSDF가 준수해야 하는 것</h3></div><div class="el-p"><p dir="auto">BSDF에 속하는 함수들은 다음의 사항을 준수하여야 한다.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">에너지 보존의 법칙: 들어온 에너지와 나가는 에너지 총량이 동일해야 한다. 예컨대 입사된 빛 에너지의 양은 ‘반사 + 흡수(열로 전환) + 투과 + 산란’된 에너지의 총량과 동일해야 한다.</li>
<li data-line="1" dir="auto">상호성(일관성): 빛의 입사방향이 변하면 나가는 형태와 방향도 일관된 방식으로 달라져야 한다.</li>
<li data-line="2" dir="auto">물리적 타당성: 물리적으로 타당한 결과를 출력해야 한다. 이를 위해 미세면 모델을 사용한다.</li>
</ol></div><div class="el-blockquote"><blockquote dir="auto">
<p>퐁 라이팅은 1번, 3번 사항을 준수하지 않는 왜곡된 모델이다.</p>
</blockquote></div><div class="el-h3"><h3 data-heading="BRDF" dir="auto" class="heading" id="BRDF_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>BRDF</h3></div><div class="el-p"><p dir="auto">Bidirectional Reflection Distribution Function, 양방향 반사율 분포 함수.</p></div><div class="el-p"><p dir="auto">투과가 없는 불투명한 표면의 한 지점에서 반사된 빛을 다룬다.</p></div><div class="el-p"><p dir="auto">재질의 금속성과 빛 입사각을 사용해 해당 지점에서의 반사와 산란의 비율로 최종 라이팅 값을 구한다. 즉 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">반</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">사</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">율</mjx-utext></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">표</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">면</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">산</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">란</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">비</mjx-utext></mjx-mi><mjx-mi class="mjx-i"><mjx-utext variant="italic" style="font-family: MJXZERO, serif; font-style: italic;">율</mjx-utext></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math></mjx-container></span> 이 되도록 한다.</p></div><div class="el-p"><p dir="auto">여기서 반사율(kS)는 Cook-Torrance Specular BRDF라는 함수로, 표면산란비율(kD)는 램버티안 확산 조명 함수로 구한다.</p></div><div class="el-p"><p dir="auto">최종적으로 구한 kS, kD 값을 더하고, 빛의 광원색(=빛의 세기)과 노멀벡터와 입사벡터의 내적(NdotL)을 곱하면 픽셀의 최종 컬러값을 구할 수 있다.</p></div><div class="el-h3"><h3 data-heading="Cook-Torrance Specular BRDF" dir="auto" class="heading" id="Cook-Torrance_Specular_BRDF_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Cook-Torrance Specular BRDF</h3></div><div class="el-p"><p dir="auto">미세면 모델(Micorofacet model)을 기반으로 한 반사 셰이딩 모델.</p></div><div class="el-p"><p dir="auto">kS(반사율)을 구하는 역할이다. 빛의 입사각을 L, 시점으로 향하는 벡터를 V, 표면의 법선 벡터를 N, V와 L의 사이각 벡터를 H라고 할 때 (원랜 빛의 반사벡터와 시야 벡터의 내적으로 H를 표현해야 하지만, 블린-퐁에서 그랬듯이 연산량을 줄이기 위해 V와 L의 사이각으로 이를 대신한다.)</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mn class="mjx-n"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p></div><div class="el-h3"><h3 data-heading="$f_D$ → Normal Distribution Function, 법선 분포 함수" dir="auto" class="heading" id="$f_D$_→_Normal_Distribution_Function,_법선_분포_함수_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Normal Distribution Function, 법선 분포 함수</h3></div><div class="el-p"><p dir="auto">거칠기와 빛의 입사각, 시야각을 고려하여 반사율을 계산하는 함수</p></div><div class="el-p"><p dir="auto">거칠기(0~1)를 R이라고 할 때</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.289em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.289em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.289em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p></div><div class="el-p"><p dir="auto">법선벡터N와 하프벡터H의 사이각이 0도에 가까울 수록 반사율이 커지고, 거칠기R이 커질 수록 반사율이 작아진다.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164059.png" src="♣vaultstorage/attachment/pasted-image-20250925164059.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20250925164059.png" src="♣vaultstorage/attachment/pasted-image-20250925164059.png" target="_self"></span></p></div><div class="el-h3"><h3 data-heading="$f_F$ → Fresnel Reflection, 프레넬 반사" dir="auto" class="heading" id="$f_F$_→_Fresnel_Reflection,_프레넬_반사_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Fresnel Reflection, 프레넬 반사</h3></div><div class="el-p"><p dir="auto">프레넬 현상에 의한 반사를 표현하는 함수. 눈에 도달한 빛의 각도에 따른 반사율을 계산한다.</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.413em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c35"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-math></mjx-container></span></p></div><div class="el-p"><p dir="auto">여기서 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math></mjx-container></span>는 최저 반사율을 의미하는데, 금속성 수준을 M이라고 할 때 식은 다음과 같다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math></mjx-container></span> = lerp(float3(0.04, 0.04, 0.04), BaseColorTex, M);</p>
</blockquote></div><div class="el-p"><p dir="auto">보는 바와 같이 M이 작아질 수록 비금속 재질의 평균 반사율 RGB값 (0.04, 0.04, 0.04)에 가까워지고, M이 커질 수록 텍스쳐의 BaseColor값에 가까워진다. 이는 금속이 본연의 색을 그대로 반사하는 성질이 있기 때문이다.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164106.png" src="♣vaultstorage/attachment/pasted-image-20250925164106.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 252px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20250925164106.png" src="♣vaultstorage/attachment/pasted-image-20250925164106.png" target="_self" style="width: 252px; max-width: 100%;"></span>  <span alt="♣VaultStorage/attachment/Pasted image 20250925164110.png" src="♣vaultstorage/attachment/pasted-image-20250925164110.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 250px; max-width: 100%;"><img alt="♣VaultStorage/attachment/Pasted image 20250925164110.png" src="♣vaultstorage/attachment/pasted-image-20250925164110.png" target="_self" style="width: 250px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">프레넬 반사 함수에 의해 더해지는 반사율의 형태(좌)와 실제 머테리얼에 적용된 모습(우).</p></div><div class="el-p"><p dir="auto">우측을 머테리얼을 보면 반사된 빛의 각도와 시야각이 수직에 가까운 중앙으로 갈 수록 어둡고, 수평에 가까운 주변으로 갈 수록 밝게 원색 그대로 반사되는 것을 볼 수 있다.</p></div><div class="el-h3"><h3 data-heading="$f_G$ → Geometric Attenuation Function, 기하학적 감쇠 모델" dir="auto" class="heading" id="$f_G$_→_Geometric_Attenuation_Function,_기하학적_감쇠_모델_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Geometric Attenuation Function, 기하학적 감쇠 모델</h3></div><div class="el-p"><p dir="auto">울퉁불퉁한 표면(거친 표면)에 빛이 비스듬히 입사될 수록 반사되지 못 하는 미세면이 생기며 반사율이 떨어지게 된다. 다음 그림과 같이.</p></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164124.png" src="♣vaultstorage/attachment/pasted-image-20250925164124.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20250925164124.png" src="♣vaultstorage/attachment/pasted-image-20250925164124.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">이를 표현한 것이 기하학적 감쇠 모델.</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p></div><div class="el-p"><p dir="auto">여기서 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span>는 거칠기R을 보정하는 함수로, 두 가지 방식으로 나뉜다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>일반적인 방식: <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac><mjx-num><mjx-nstrut></mjx-nstrut><mjx-mrow size="s"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line></mjx-line><mjx-row><mjx-den><mjx-dstrut></mjx-dstrut><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c38"></mjx-c></mjx-mn></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p>
</blockquote></div><div class="el-blockquote"><blockquote dir="auto">
<p>IBL(Image-Based Lighting)을 사용할 때: <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac><mjx-num><mjx-nstrut></mjx-nstrut><mjx-msup size="s"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-num><mjx-dbox><mjx-dtable><mjx-line></mjx-line><mjx-row><mjx-den><mjx-dstrut></mjx-dstrut><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p>
</blockquote></div><div class="el-p"><p dir="auto"><span alt="♣VaultStorage/attachment/Pasted image 20250925164130.png" src="♣vaultstorage/attachment/pasted-image-20250925164130.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="♣VaultStorage/attachment/Pasted image 20250925164130.png" src="♣vaultstorage/attachment/pasted-image-20250925164130.png" target="_self"></span></p></div><div class="el-h3"><h3 data-heading="램버티안 확산 조명 함수" dir="auto" class="heading" id="램버티안_확산_조명_함수_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>램버티안 확산 조명 함수</h3></div><div class="el-p"><p dir="auto">kD(표면산란비율)를 구하는 역할이다. 베이스 컬러의 색상을 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span>, 앞서 구한 프레넬 반사 함수 값을 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span>, 금속성 정도를 M이라고 할 때</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></span></p></div><div class="el-h3"><h3 data-heading="최종 픽셀 컬러값 계산" dir="auto" class="heading" id="최종_픽셀_컬러값_계산_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>최종 픽셀 컬러값 계산</h3></div><div class="el-p"><p dir="auto">앞서 구한 Cook-Torrance Specular BRDF함수의 결과값을 kS, 램버티안 확산 조명 함수의 결과값을 kD, 빛의 색(=세기)을 <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span>, 법선벡터와 빛의 입사벡터의 내적을 NdotL이라고 할 때, 픽셀의 최종 컬러값은 다음과 같다.</p></div><div class="el-p"><p dir="auto"><span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-math></mjx-container></span></p></div><div class="el-hr"><hr></div><div class="el-h1"><h1 data-heading="HLSL 코드" dir="auto" class="heading" id="HLSL_코드_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>HLSL 코드</h1></div><div class="el-pre"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">// Cook-Torrance Specular BRDF</span>
float3 <span class="token function">FresnelReflection</span><span class="token punctuation">(</span>float3 half_vector<span class="token punctuation">,</span> float3 view_vector<span class="token punctuation">,</span> float3 base_color<span class="token punctuation">,</span> <span class="token keyword">float</span> metallic<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    float3 f0 <span class="token operator">=</span> <span class="token function">lerp</span><span class="token punctuation">(</span><span class="token function">float3</span><span class="token punctuation">(</span><span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">)</span><span class="token punctuation">,</span> base_color<span class="token punctuation">,</span> metallic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> cos_theta <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>half_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> f0 <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1.0f</span> <span class="token operator">-</span> f0<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">1.0f</span> <span class="token operator">-</span> cos_theta<span class="token punctuation">,</span> <span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">float</span> <span class="token function">NormalDistribution</span><span class="token punctuation">(</span>float3 normal_vector<span class="token punctuation">,</span> float3 half_vector<span class="token punctuation">,</span> <span class="token keyword">float</span> roughness<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">float</span> roughness_square <span class="token operator">=</span> roughness <span class="token operator">*</span> roughness<span class="token punctuation">;</span>
    <span class="token keyword">float</span> NdotH_square <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> half_vector<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> roughness_square <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">3.14159265f</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span>NdotH_square <span class="token operator">*</span> <span class="token punctuation">(</span>roughness_square <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">float</span> <span class="token function">GeometricAttenuation_Direct</span><span class="token punctuation">(</span>float3 normal_vector<span class="token punctuation">,</span> float3 view_vector<span class="token punctuation">,</span> <span class="token keyword">float</span> roughness<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">float</span> fk <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span>roughness <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> NdotV <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> NdotV <span class="token operator">/</span> <span class="token punctuation">(</span>NdotV <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fk<span class="token punctuation">)</span> <span class="token operator">+</span> fk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">float</span> <span class="token function">GeometricAttenuation_IBL</span><span class="token punctuation">(</span>float3 normal_vector<span class="token punctuation">,</span> float3 view_vector<span class="token punctuation">,</span> <span class="token keyword">float</span> roughness<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">float</span> fk <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span>roughness<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> NdotV <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> NdotV <span class="token operator">/</span> <span class="token punctuation">(</span>NdotV <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fk<span class="token punctuation">)</span> <span class="token operator">+</span> fk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
float3 <span class="token function">CookTorranceSpecular</span><span class="token punctuation">(</span>float3 FR<span class="token punctuation">,</span> <span class="token keyword">float</span> NDF<span class="token punctuation">,</span> <span class="token keyword">float</span> G<span class="token punctuation">,</span> float3 normal_vector<span class="token punctuation">,</span> float3 light_vector<span class="token punctuation">,</span> float3 view_vector<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	float3 numerator <span class="token operator">=</span> FR <span class="token operator">*</span> NDF <span class="token operator">*</span> G<span class="token punctuation">;</span>
	<span class="token keyword">float</span> denominator <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> light_vector<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 여기다 + 0.001을 하는 게 방어 코드라는데 값이 너무 작아지지 않게 하는 용도인 듯.</span>
	
	<span class="token keyword">return</span> numerator <span class="token operator">/</span> denominator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Lambertian Diffuse Lighting</span>
float3 <span class="token function">LambertianDiffuseLighting</span><span class="token punctuation">(</span>float3 base_color<span class="token punctuation">,</span> float3 FR<span class="token punctuation">,</span> <span class="token keyword">float</span> metallic<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	float3 diffuse_ratio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1.0f</span> <span class="token operator">-</span> FR<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0f</span> <span class="token operator">-</span> metallic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> base_color <span class="token operator">/</span> <span class="token number">3.14159265f</span> <span class="token operator">*</span> diffuse_ratio<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

float3 <span class="token function">PBRLighting</span><span class="token punctuation">(</span>PS_INPUT input<span class="token punctuation">,</span> float3 view_vector<span class="token punctuation">,</span> float3 light_vector<span class="token punctuation">,</span> float3 light_color<span class="token punctuation">,</span> float3 normal_vector<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 연산량 절약을 위해 하프 벡터 사용 / 빛의 입사벡터의 반사벡터와 뷰 벡터의 내적을 사용해도 상관 없음.</span>
	float3 half_vector <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>view_vector <span class="token operator">+</span> light_vector<span class="token punctuation">)</span><span class="token punctuation">;</span>
	float3 base_color <span class="token operator">=</span> <span class="token function">GetDiffuseColor</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// input에 대충 이런 값들이 들어있다고 가정</span>
	<span class="token comment">//float metallic = 0.8f;</span>
	<span class="token comment">//float roughness = 0.4f;</span>
	
	float3 FR <span class="token operator">=</span> <span class="token function">FresnelReflection</span><span class="token punctuation">(</span>half_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">,</span> base_color<span class="token punctuation">,</span> metallic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> NDF <span class="token operator">=</span> <span class="token function">NormalDistribution</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> half_vector<span class="token punctuation">,</span> roughness<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> G <span class="token operator">=</span> <span class="token function">GeometricAttenuation_Direct</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">,</span> roughness<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// Cook-Torrance BRDF ~ 반사율</span>
	float3 kS <span class="token operator">=</span> <span class="token function">CookTorranceSpecular</span><span class="token punctuation">(</span>FR<span class="token punctuation">,</span> NDF<span class="token punctuation">,</span> G<span class="token punctuation">,</span> normal_vector<span class="token punctuation">,</span> light_vector<span class="token punctuation">,</span> view_vector<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 표면 산란 비율</span>
	float3 kD <span class="token operator">=</span> <span class="token function">LambertianDiffuseLighting</span><span class="token punctuation">(</span>base_color<span class="token punctuation">,</span> FR<span class="token punctuation">,</span> metallic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">float</span> NdotL <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>normal_vector<span class="token punctuation">,</span> light_vector<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
	<span class="token comment">// 최종 조명 계산</span>
	
	<span class="token comment">// 환경광 큐브맵과 Ambient Occlusion을 사용하는 경우 ~ 정확하지 않음!</span>
	<span class="token comment">//float3 irradiance = EnvMap.Sample(SamplerLinear, N).rgb; // 환경광 샘플링</span>
	<span class="token comment">//float3 diffuse = irradiance * Albedo;</span>
	<span class="token comment">//float3 ambient = (kD * diffuse + specular) * AO;</span>
	<span class="token comment">//return (kD * Albedo / 3.14159265359 + specular) * NdotL + ambient;</span>
	
	<span class="token comment">// 사용하지 않는 경우</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>kS <span class="token operator">+</span> kD<span class="token punctuation">)</span> <span class="token operator">*</span> light_color <span class="token operator">*</span> NdotL<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#PBR(Physically-Based_Rendering),_BRDF_0" data-path="#PBR(Physically-Based_Rendering),_BRDF_0"><div class="tree-item-inner heading-link" heading-name="PBR(Physically-Based Rendering), BRDF">PBR(Physically-Based Rendering), BRDF</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#PBR이란_0" data-path="#PBR이란_0"><div class="tree-item-inner heading-link" heading-name="PBR이란">PBR이란</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#사전_지식_0" data-path="#사전_지식_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="사전 지식">사전 지식</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#빛의_성질_0" data-path="#빛의_성질_0"><div class="tree-item-inner heading-link" heading-name="빛의 성질">빛의 성질</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#금속의_성질_0" data-path="#금속의_성질_0"><div class="tree-item-inner heading-link" heading-name="금속의 성질">금속의 성질</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#프레넬_효과_0" data-path="#프레넬_효과_0"><div class="tree-item-inner heading-link" heading-name="프레넬 효과">프레넬 효과</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#BSDF_0" data-path="#BSDF_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="BSDF">BSDF</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#BSDF가_준수해야_하는_것_0" data-path="#BSDF가_준수해야_하는_것_0"><div class="tree-item-inner heading-link" heading-name="BSDF가 준수해야 하는 것">BSDF가 준수해야 하는 것</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#BRDF_0" data-path="#BRDF_0"><div class="tree-item-inner heading-link" heading-name="BRDF">BRDF</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#Cook-Torrance_Specular_BRDF_0" data-path="#Cook-Torrance_Specular_BRDF_0"><div class="tree-item-inner heading-link" heading-name="Cook-Torrance Specular BRDF">Cook-Torrance Specular BRDF</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#$f_D$_→_Normal_Distribution_Function,_법선_분포_함수_0" data-path="#$f_D$_→_Normal_Distribution_Function,_법선_분포_함수_0"><div class="tree-item-inner heading-link" heading-name="$f_D$ → Normal Distribution Function, 법선 분포 함수"><p dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Normal Distribution Function, 법선 분포 함수</p></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#$f_F$_→_Fresnel_Reflection,_프레넬_반사_0" data-path="#$f_F$_→_Fresnel_Reflection,_프레넬_반사_0"><div class="tree-item-inner heading-link" heading-name="$f_F$ → Fresnel Reflection, 프레넬 반사"><p dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Fresnel Reflection, 프레넬 반사</p></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#$f_G$_→_Geometric_Attenuation_Function,_기하학적_감쇠_모델_0" data-path="#$f_G$_→_Geometric_Attenuation_Function,_기하학적_감쇠_모델_0"><div class="tree-item-inner heading-link" heading-name="$f_G$ → Geometric Attenuation Function, 기하학적 감쇠 모델"><p dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math></mjx-container></span> → Geometric Attenuation Function, 기하학적 감쇠 모델</p></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#램버티안_확산_조명_함수_0" data-path="#램버티안_확산_조명_함수_0"><div class="tree-item-inner heading-link" heading-name="램버티안 확산 조명 함수">램버티안 확산 조명 함수</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#최종_픽셀_컬러값_계산_0" data-path="#최종_픽셀_컬러값_계산_0"><div class="tree-item-inner heading-link" heading-name="최종 픽셀 컬러값 계산">최종 픽셀 컬러값 계산</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="0-발행완료/자체엔진/그래픽스/pbr(physically-based-rendering),-brdf.html#HLSL_코드_0" data-path="#HLSL_코드_0"><div class="tree-item-inner heading-link" heading-name="HLSL 코드">HLSL 코드</div></a><div class="tree-item-children"></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>